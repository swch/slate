
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-4b719cc0.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-c427a123.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;,&quot;csharp&quot;,&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/Cardsavr_Horiz_554px-ec070cbf.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="csharp">csharp</a>
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#headers" class="toc-h1 toc-link" data-title="Headers">Headers</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#session-tokens" class="toc-h2 toc-link" data-title="session-tokens">session-tokens</a>
                  </li>
                  <li>
                    <a href="#trace" class="toc-h2 toc-link" data-title="Trace">Trace</a>
                  </li>
                  <li>
                    <a href="#hydration" class="toc-h2 toc-link" data-title="Hydration">Hydration</a>
                  </li>
                  <li>
                    <a href="#financial-institution" class="toc-h2 toc-link" data-title="Financial Institution">Financial Institution</a>
                  </li>
                  <li>
                    <a href="#client-application" class="toc-h2 toc-link" data-title="Client Application">Client Application</a>
                  </li>
                  <li>
                    <a href="#paging" class="toc-h2 toc-link" data-title="Paging">Paging</a>
                  </li>
                  <li>
                    <a href="#safe-key" class="toc-h2 toc-link" data-title="Safe key">Safe key</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-usage" class="toc-h1 toc-link" data-title="API Usage">API Usage</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-filters" class="toc-h2 toc-link" data-title="GET Filters">GET Filters</a>
                  </li>
                  <li>
                    <a href="#cascading-delete" class="toc-h2 toc-link" data-title="Cascading DELETE">Cascading DELETE</a>
                  </li>
                  <li>
                    <a href="#plural-post" class="toc-h2 toc-link" data-title="Plural POST">Plural POST</a>
                  </li>
                  <li>
                    <a href="#plural-put-delete" class="toc-h2 toc-link" data-title="Plural PUT/DELETE">Plural PUT/DELETE</a>
                  </li>
                  <li>
                    <a href="#request-hydration-on-post" class="toc-h2 toc-link" data-title="Request Hydration on POST">Request Hydration on POST</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#passwords-and-authorization" class="toc-h1 toc-link" data-title="Passwords and Authorization">Passwords and Authorization</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authorize-cardholder" class="toc-h2 toc-link" data-title="Authorize cardholder">Authorize cardholder</a>
                  </li>
                  <li>
                    <a href="#update-user-password" class="toc-h2 toc-link" data-title="Update user password">Update user password</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#session" class="toc-h1 toc-link" data-title="Session">Session</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#user-login" class="toc-h2 toc-link" data-title="User login">User login</a>
                  </li>
                  <li>
                    <a href="#end-session" class="toc-h2 toc-link" data-title="End session">End session</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#accounts" class="toc-h1 toc-link" data-title="Accounts">Accounts</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-account" class="toc-h2 toc-link" data-title="Get account">Get account</a>
                  </li>
                  <li>
                    <a href="#create-account" class="toc-h2 toc-link" data-title="Create account">Create account</a>
                  </li>
                  <li>
                    <a href="#upsert-account" class="toc-h2 toc-link" data-title="Upsert account">Upsert account</a>
                  </li>
                  <li>
                    <a href="#delete-account" class="toc-h2 toc-link" data-title="Delete account">Delete account</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#addresses" class="toc-h1 toc-link" data-title="Addresses">Addresses</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-address" class="toc-h2 toc-link" data-title="Get address">Get address</a>
                  </li>
                  <li>
                    <a href="#create-address" class="toc-h2 toc-link" data-title="Create address">Create address</a>
                  </li>
                  <li>
                    <a href="#update-address" class="toc-h2 toc-link" data-title="Update address">Update address</a>
                  </li>
                  <li>
                    <a href="#delete-address" class="toc-h2 toc-link" data-title="Delete address">Delete address</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#bins" class="toc-h1 toc-link" data-title="Bins">Bins</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-bin" class="toc-h2 toc-link" data-title="Get bin">Get bin</a>
                  </li>
                  <li>
                    <a href="#create-bin" class="toc-h2 toc-link" data-title="Create bin">Create bin</a>
                  </li>
                  <li>
                    <a href="#update-bin" class="toc-h2 toc-link" data-title="Update bin">Update bin</a>
                  </li>
                  <li>
                    <a href="#delete-bin" class="toc-h2 toc-link" data-title="Delete bin">Delete bin</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#cards" class="toc-h1 toc-link" data-title="Cards">Cards</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-card" class="toc-h2 toc-link" data-title="Get card">Get card</a>
                  </li>
                  <li>
                    <a href="#create-card" class="toc-h2 toc-link" data-title="Create card">Create card</a>
                  </li>
                  <li>
                    <a href="#upsert-card" class="toc-h2 toc-link" data-title="Upsert card">Upsert card</a>
                  </li>
                  <li>
                    <a href="#delete-card" class="toc-h2 toc-link" data-title="Delete card">Delete card</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#cardholders" class="toc-h1 toc-link" data-title="Cardholders">Cardholders</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-cardholder" class="toc-h2 toc-link" data-title="Get cardholder">Get cardholder</a>
                  </li>
                  <li>
                    <a href="#create-cardholder" class="toc-h2 toc-link" data-title="Create cardholder">Create cardholder</a>
                  </li>
                  <li>
                    <a href="#upsert-cardholder" class="toc-h2 toc-link" data-title="Upsert cardholder">Upsert cardholder</a>
                  </li>
                  <li>
                    <a href="#delete-cardholder" class="toc-h2 toc-link" data-title="Delete cardholder">Delete cardholder</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#users" class="toc-h1 toc-link" data-title="Users">Users</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-user" class="toc-h2 toc-link" data-title="Get user">Get user</a>
                  </li>
                  <li>
                    <a href="#create-user" class="toc-h2 toc-link" data-title="Create user">Create user</a>
                  </li>
                  <li>
                    <a href="#update-user" class="toc-h2 toc-link" data-title="Update user">Update user</a>
                  </li>
                  <li>
                    <a href="#delete-user" class="toc-h2 toc-link" data-title="Delete user">Delete user</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#financial-institutions" class="toc-h1 toc-link" data-title="Financial Institutions">Financial Institutions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-financial-institution" class="toc-h2 toc-link" data-title="Get financial institution">Get financial institution</a>
                  </li>
                  <li>
                    <a href="#create-financial-institution" class="toc-h2 toc-link" data-title="Create financial institution">Create financial institution</a>
                  </li>
                  <li>
                    <a href="#update-financial-institution" class="toc-h2 toc-link" data-title="Update financial institution">Update financial institution</a>
                  </li>
                  <li>
                    <a href="#delete-financial-institution" class="toc-h2 toc-link" data-title="Delete financial institution">Delete financial institution</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#integrators" class="toc-h1 toc-link" data-title="Integrators">Integrators</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-integrator" class="toc-h2 toc-link" data-title="Get integrator">Get integrator</a>
                  </li>
                  <li>
                    <a href="#create-integrator" class="toc-h2 toc-link" data-title="Create integrator">Create integrator</a>
                  </li>
                  <li>
                    <a href="#update-integrator" class="toc-h2 toc-link" data-title="Update integrator">Update integrator</a>
                  </li>
                  <li>
                    <a href="#delete-integrator" class="toc-h2 toc-link" data-title="Delete integrator">Delete integrator</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#merchant-sites" class="toc-h1 toc-link" data-title="Merchant sites">Merchant sites</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-merchant-site" class="toc-h2 toc-link" data-title="Get merchant site">Get merchant site</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#notifications" class="toc-h1 toc-link" data-title="Notifications">Notifications</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-notification" class="toc-h2 toc-link" data-title="Get notification">Get notification</a>
                  </li>
                  <li>
                    <a href="#create-notification" class="toc-h2 toc-link" data-title="Create notification">Create notification</a>
                  </li>
                  <li>
                    <a href="#update-notification" class="toc-h2 toc-link" data-title="Update notification">Update notification</a>
                  </li>
                  <li>
                    <a href="#delete-notification" class="toc-h2 toc-link" data-title="Delete notification">Delete notification</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#notification-results" class="toc-h1 toc-link" data-title="Notification results">Notification results</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-notification-result" class="toc-h2 toc-link" data-title="Get notification result">Get notification result</a>
                  </li>
                  <li>
                    <a href="#create-notification-result" class="toc-h2 toc-link" data-title="Create notification result">Create notification result</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#single-site-jobs" class="toc-h1 toc-link" data-title="Single-site jobs">Single-site jobs</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-single-site-job" class="toc-h2 toc-link" data-title="Get single-site job">Get single-site job</a>
                  </li>
                  <li>
                    <a href="#create-single-site-job" class="toc-h2 toc-link" data-title="Create single-site job">Create single-site job</a>
                  </li>
                  <li>
                    <a href="#update-single-site-job" class="toc-h2 toc-link" data-title="Update single-site job">Update single-site job</a>
                  </li>
                  <li>
                    <a href="#delete-single-site-job" class="toc-h2 toc-link" data-title="Delete single-site job">Delete single-site job</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#client-messages" class="toc-h1 toc-link" data-title="Client Messages">Client Messages</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#subscribe-to-status-updates" class="toc-h2 toc-link" data-title="Subscribe to Status Updates">Subscribe to Status Updates</a>
                  </li>
                  <li>
                    <a href="#get-job-status-updates" class="toc-h2 toc-link" data-title="Get Job Status Updates">Get Job Status Updates</a>
                  </li>
                  <li>
                    <a href="#get-cardholder-status-updates" class="toc-h2 toc-link" data-title="Get Cardholder Status Updates">Get Cardholder Status Updates</a>
                  </li>
                  <li>
                    <a href="#get-credential-requests" class="toc-h2 toc-link" data-title="Get Credential Requests">Get Credential Requests</a>
                  </li>
                  <li>
                    <a href="#post-credential-response" class="toc-h2 toc-link" data-title="Post Credential Response">Post Credential Response</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Email us for a Developer Key</a></li>
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>The CardSavr REST API is a service for managing payment card circulation on merchant websites. It uses REST principles and standard HTTP features, such as HTTP verbs, as well as several layers of security to protect sensitive data.</p>

<p>CardSavr responses and requests support JSON-formatted bodies only.</p>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authorize, an init or login call (differs per SDK) is required:</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">CardsavrHelper</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@strivve/strivve-sdk/lib/cardsavr/CardsavrJSLibrary-2.0</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">session</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CardsavrSession</span><span class="p">(</span><span class="nx">cardsavr_server</span><span class="p">,</span> <span class="nx">app_key</span><span class="p">,</span> <span class="nx">app_name</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">login_data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">);</span>
<span class="c1">//await session.getCards({}); //session can now be used to make api calls</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">Switch.CardSavr.Http</span><span class="p">;</span>

<span class="n">CardSavrHttpClient</span> <span class="n">session</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CardSavrHttpClient</span><span class="p">(</span><span class="n">_cardsavrServer</span><span class="p">,</span> 
  <span class="n">_appKey</span><span class="p">,</span> <span class="n">_appName</span><span class="p">,</span> <span class="n">userName</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>
<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">LoginResult</span><span class="p">&gt;</span> <span class="n">login</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">Init</span><span class="p">();</span>

<span class="c1">//await session.getCardsAsync(); //session can now be used to make api calls</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.strivve.CardsavrSession</span><span class="o">;</span>

<span class="k">this</span><span class="o">.</span><span class="na">session</span> <span class="o">=</span> <span class="nc">CardsavrSession</span><span class="o">.</span><span class="na">createSession</span><span class="o">(</span><span class="n">integratorName</span><span class="o">,</span> <span class="n">integratorKey</span><span class="o">,</span> <span class="n">apiServer</span><span class="o">);</span>
<span class="nc">JsonObject</span> <span class="n">obj</span> <span class="o">=</span> <span class="o">(</span><span class="nc">JsonObject</span><span class="o">)</span> <span class="n">session</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># With a shell, you must first establish a session, followed by </span>
<span class="c"># a login command.  Keep in mind, this ONLY works </span>
<span class="c"># with a development server that supports unsigned body requests. </span>
curl <span class="s2">"https://api.INSTANCE.cardsavr.io/session/start"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> 

curl <span class="nt">-iv</span> <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">PASSWORD</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">userName</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">USERNAME</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="s2">"https://api.INSTANCE.cardsavr.io/session/login"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> 

</code></pre></div>
<blockquote>
<p>The SDK calls hide the implementation of the login.  Login includes an ECDH key exchange, password signing, and the establishment of a session secret key, which will be used for all future encryptions.  It also leverages a session token which enables the client to access their session on the server.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"serverPublicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_public_key"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"valid_password"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">321</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> 
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john_smith_123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jsmith@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"is_locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-19T23:10:36.657Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>There is more information in the <a href="#session">session endpoint</a> documentation. If you decide not to use one of the Strivve SDKs, you are responsible for encryption of all bodies passed into the REST API.  </p>

<aside class="notice">
The cardsavr server, app key, app name, and the application username/password must be attained from developers@strivve.com.  See the definitions of these settings [link to app key definitions] here.
</aside>
<h1 id='headers'>Headers</h1>
<p>There is a set of required and optional headers.  The SDKs abstract most of these settings, but it&#39;s important to understand how they are used when making REST calls. </p>

<p>REST calls support and/or require the following headers once the session is established.  </p>

<table><thead>
<tr>
<th>Header</th>
<th>Default</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>x-cardsavr-trace</td>
<td>required</td>
<td>stringified JSON object</td>
<td><a href="#trace">See trace</a></td>
</tr>
<tr>
<td>x-cardsavr-client-application</td>
<td>integrator name</td>
<td>string</td>
<td>unique per application, integrator name provided as default when using an SDK</td>
</tr>
<tr>
<td>x-cardsavr-authorization</td>
<td>required</td>
<td>string</td>
<td>contains the <a href="https://developers.strivve.com/resources/encryption">integrator name and a prefix</a>, populated by SDK libraries.</td>
</tr>
<tr>
<td>x-cardsavr-nonce</td>
<td>required</td>
<td>string (milliseconds)</td>
<td>contains the current UTC time in milliseconds, and therefore provides protection against <a href="https://developers.strivve.com/resources/encryption">replay attacks</a>.</td>
</tr>
<tr>
<td>x-cardsavr-signature</td>
<td>required</td>
<td>string</td>
<td>The <a href="https://developers.strivve.com/resources/encryption">string-to-sign format</a> requires the URL-Path (decoded), the authorization header, and the nonce header.  Also part of the <a href="https://developers.strivve.com/api-sdk/">SDK Libraries</a>.</td>
</tr>
<tr>
<td>x-cardsavr-hydration</td>
<td>(none)</td>
<td>stringified JSON object</td>
<td><a href="#hydration">See hydration</a></td>
</tr>
<tr>
<td>x-cardsavr-paging</td>
<td>{&quot;page&quot;: 1, &quot;page_length&quot;: 25}</td>
<td>stringified JSON object</td>
<td>Only supported with GET calls. <a href="#paging">See paging</a></td>
</tr>
<tr>
<td>x-cardsavr-session-jwt</td>
<td>required</td>
<td>string</td>
<td><a href="#session-tokens">See session tokens</a></td>
</tr>
</tbody></table>
<h2 id='session-tokens'>session-tokens</h2>
<p>CardSavr needs to maintain an API session for state management including authentication, session key, replay prevention, etc.  Standard RFC-7519 JWT tokens are used for client sessions. The x-cardsavr-session-jwt header is used with token based sessions. The x-cardsavr-session-jwt header is managed transparently within the Strivve SDK.  It is the responsibility of applications directly using the direct REST protocol to set this header for each request.</p>

<p>With POST /session/login to begin a new session, this header is not required and will be ignored.</p>

<p>With all subsequent requests on a session</p>

<p><code>&quot;x-cardsavr-session-jwt&quot;: value-returned-from-session-login</code></p>
<h2 id='trace'>Trace</h2>
<blockquote>
<p>Setting a sample trace header</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">//initialize as part of the session initialization; if not set </span>
<span class="c1">//explicitly, the trace header defaults to the unique username of  //the client user.  If an agent user is operating on behalf of a </span>
<span class="c1">//cardholder, the cardholder cid is the default.  The example      //specifies how to change it.</span>

<span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">NlOFNNlKabi7Fn26CLw=</span><span class="dl">"</span><span class="p">}));</span>

<span class="nx">session</span><span class="p">.</span><span class="nx">setTrace</span><span class="p">(</span><span class="dl">"</span><span class="s2">NlOFNNlKabi7Fn26CLw=</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">//or per request</span>
<span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getUsers</span><span class="p">({},</span> <span class="p">{},</span> <span class="p">{</span><span class="dl">"</span><span class="s2">x-cardsavr-trace</span><span class="dl">"</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">NlOFNNlKabi7Fn26CLw=</span><span class="dl">"</span><span class="p">})});</span> 
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="c1">//Add a trace at the start of the session</span>
<span class="n">CardSavrHttpClient</span> <span class="n">session</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CardSavrHttpClient</span><span class="p">(</span><span class="n">_cardsavrServer</span><span class="p">,</span> 
  <span class="n">_appKey</span><span class="p">,</span> <span class="n">_appName</span><span class="p">,</span> <span class="n">userName</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s">"{\"key\": \"my_trace\"}"</span><span class="p">);</span>

<span class="c1">//or per request</span>
<span class="n">HttpRequestHeaders</span> <span class="n">headers</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpRequestMessage</span><span class="p">().</span><span class="n">Headers</span><span class="p">;</span>

<span class="n">headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"x-cardsavr-trace"</span><span class="p">,</span> <span class="s">"{\"key\": \"my_trace\"}"</span><span class="p">);</span>
<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">User</span><span class="p">&gt;&gt;</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">GetUsersAsync</span><span class="p">(</span><span class="k">null</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="n">headers</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">CardsavrSession</span> <span class="n">session</span> <span class="o">=</span> <span class="nc">CardsavrSession</span><span class="o">.</span><span class="na">createSession</span><span class="o">(</span><span class="n">integratorName</span><span class="o">,</span> <span class="n">integratorKey</span><span class="o">,</span> <span class="n">apiServer</span><span class="o">);</span>

<span class="c1">//Add a trace at the start of the session</span>
<span class="nc">JsonObject</span> <span class="n">trace</span> <span class="o">=</span> <span class="n">createObjectBuilder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">"key"</span><span class="o">,</span> <span class="s">"my_trace"</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
<span class="o">(</span><span class="nc">JsonObject</span><span class="o">)</span> <span class="n">session</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">,</span> <span class="n">trace</span><span class="o">);</span>

<span class="c1">//or per request</span>
<span class="nc">Headers</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">createHeaders</span><span class="o">();</span>
<span class="n">headers</span><span class="o">.</span><span class="na">trace</span> <span class="o">=</span> <span class="n">trace</span><span class="o">;</span>
<span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/cardsavr_cards"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="n">headers</span><span class="o">);</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.INSTANCE.cardsavr.io/cardsavr_users"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">NlOFNNlKabi7Fn26CLw==</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">bid</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">hEOF26sbi7FCNNlLw==</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<p><code>&quot;x-cardsavr-trace&quot;: JSON-stringified trace object</code></p>

<p>CardSavr uses trace headers to trace all request-related activity within the CardSavr infrastructure. When a request is made to CardSavr, any ID included in the trace header will appear in all logging associated with that request. This allows for quick troubleshooting and monitoring. .  </p>

<p>The trace header takes a JSON-stringified object, which can be as simple or as complex as necessary for the given application.  The trace is a <strong>required header</strong>, and must contain at least a trace &quot;key&quot;.  Within the SDKs, the trace key defaults to the username of the session.</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>key</td>
<td>unique key that identifies a request or set of requests</td>
<td>`trace: &#39;{ &quot;key&quot;: &quot;hEOFNKapn26sbi7FCNNlLw==&quot; }&#39;</td>
</tr>
</tbody></table>

<p>A trace header can contain multiple trace IDs. It is up to the developer to mint trace IDs in a way that best categorizes their app&#39;s requests. If a backend server is used, adding the trace IDs into the backend server logs can yield additional tracing efficacy.</p>
<h2 id='hydration'>Hydration</h2>
<blockquote>
<p>Setting a sample Hydration Header</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getCards</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="p">{},</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">x-cardsavr-hydration</span><span class="dl">"</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">([</span><span class="dl">"</span><span class="s2">address</span><span class="dl">"</span><span class="p">])</span> <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">HttpRequestHeaders</span> <span class="n">headers</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpRequestMessage</span><span class="p">().</span><span class="n">Headers</span><span class="p">;</span>
<span class="n">headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"x-cardsavr-hydration"</span><span class="p">,</span> <span class="s">"[\"address\"]"</span><span class="p">);</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">Card</span><span class="p">&gt;&gt;</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> 
  <span class="n">http</span><span class="p">.</span><span class="nf">GetCardsAsync</span><span class="p">(</span><span class="m">123</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">CardsavrSession</span> <span class="n">header</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">createHeaders</span><span class="o">();</span>
<span class="n">headers</span><span class="o">.</span><span class="na">hydration</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createArrayBuilder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">"address"</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>

<span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/cardsavr_cards"</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">headers</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.INSTANCE.cardsavr.io/cardsavr_cards/123"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">NlOFNNlKabi7Fn26CLw==</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-hydration: [</span><span class="se">\"</span><span class="s2">address</span><span class="se">\"</span><span class="s2">]"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cardholder_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bin_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
  </span><span class="nl">"par"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Q1J4AwSWD4Dx6q1DTo0MB21XDAV76"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiration_month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiration_year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name_on_card"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe Smith"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-06T20:33:23.094Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-13T22:32:30.897Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"cardholder_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345 Harris Ave"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STE. 601"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Seattle"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subnational"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USA"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98133"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"postal_other"</span><span class="p">:</span><span class="w"> </span><span class="mi">98133-1234</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-02T10:12:51.081Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-06T20:33:23.094Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><code>{&quot;x-cardsavr-hydration&quot;: {JSON-stringified array of resources to be hydrated}}</code></p>

<p>For requests against a resource type that contains foreign key references (e.g. &#39;address_id&#39; for &#39;cardsavr_cards&#39;), a hydration header will &quot;hydrate&quot; (i.e. fill out) any of the resources indicated. Therefore, any objects returned in the response body will contain additional key-value pairs for each of the resources listed, where the key is the resource name (e.g. &quot;address&quot; in the previous example) and the value is the full object.</p>

<p>For example, including the header {hydration: &#39;[&quot;address&quot;]&#39;} in a successful PUT request to &#39;/cardsavr_cards/123&#39; would return the updated card with an additional &#39;address&#39; property containing the full address object associated with that card.</p>

<p><strong>Nested hydration</strong> can also be used. For example, the following header:</p>

<p><code>{&quot;x-cardsavr-hydration&quot;: &#39;[&quot;card.cardholder&quot;]&#39;}</code></p>

<p>for the endpoint &#39;/place_card_on_multiple_sites_jobs&#39; would hydrate the associated card AND cardholder (i.e. user) associated with the card. Hydration headers can be used with any endpoint for any resource that contains foreign key references.</p>
<h2 id='financial-institution'>Financial Institution</h2>
<p>A financial-institution header is required on many calls that require FI specfic context.  For example, all cardholders must belong to a financial insitution, and thus the header is required upon creation.  The header is preferred over applying to the body to avoid the unnecessary extra lookup call.  The SDK functions that require the fi have a required parameter in the corresponding function.</p>
<h2 id='client-application'>Client Application</h2>
<blockquote>
<p>Setting a custom application header (defaults to app name)</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">session</span><span class="p">.</span><span class="nx">setSessionHeaders</span><span class="p">(</span> <span class="p">{</span><span class="dl">'</span><span class="s1">client-application</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">my-client-app</span><span class="dl">'</span> <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">http</span><span class="p">.</span><span class="nf">SetIdentificationHeader</span><span class="p">(</span><span class="err">'</span><span class="n">my</span><span class="p">-</span><span class="n">client</span><span class="p">-</span><span class="n">app</span><span class="err">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="c1">//Not implemented, must pass as a header</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.INSTANCE.cardsavr.io/cardsavr_cards/123"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">NlOFNNlKabi7Fn26CLw==</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-H</span> <span class="s2">"client-application: </span><span class="se">\"</span><span class="s2">my-client-app</span><span class="se">\"</span><span class="s2">"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<p><code>{&#39;client-application&#39;: {client application name}}</code></p>

<p>Your client application name will appear in the CardSavr logs alongside each request and response for your app, making troubleshooting and any other information retrieval much easier. Choose a name that clearly identifies your specific app for improved log searching (e.g. &quot;acmebank-web-app&quot;).  When using the SDKs, the client-application defaults to the integrator name, and this is generally acceptable for most use cases.  This is an optional header, but recommended when not using the SDK.</p>
<h2 id='paging'>Paging</h2>
<blockquote>
<p>Paging headers give you the flexibility to modify the number of results returned, and how they should be sorted.</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">//javascript SDK supports a json object as a paging header</span>
<span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getCards</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="p">{</span> <span class="na">page</span><span class="p">:</span> <span class="mi">1</span> <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">Paging</span> <span class="n">paging</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Paging</span><span class="p">()</span> <span class="p">{</span> <span class="n">PageLength</span> <span class="p">=</span> <span class="m">100</span> <span class="p">};</span>
<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">Card</span><span class="p">&gt;&gt;</span> <span class="n">list</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">getCardsAsync</span><span class="p">(</span><span class="k">null</span><span class="p">,</span> <span class="n">paging</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">Headers</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">createHeaders</span><span class="o">();</span>
<span class="n">headers</span><span class="o">.</span><span class="na">paging</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">"page"</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="s">"page_length"</span><span class="o">,</span> <span class="mi">5</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
<span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/cardsavr_cards"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="n">headers</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.INSTANCE.cardsavr.io/cardsavr_cards/123"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">NlOFNNlKabi7Fn26CLw==</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-paging: </span><span class="se">\"</span><span class="s2">{</span><span class="se">\"</span><span class="s2">page</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">1</span><span class="se">\"</span><span class="s2">}</span><span class="se">\"</span><span class="s2">"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<p><code>{&#39;paging&#39;: &#39;JSON-stringified paging object&#39;}</code></p>

<p>CardSavr uses paging headers in both requests to and responses from batch GET endpoints. When sent with a batch GET request, a paging header specifies the length, sorting criterion, page number, and order of the data returned. Since each batch GET request can only return one page of data at a time, paging headers give users more control over the data they receive back.</p>

<p>If no paging header is submitted with the request, default values are applied (see table).</p>

<p><strong>Note</strong>: CardSavr sends a paging header with each batch GET response to provide details about the page returned.</p>

<p>In the example header at right sent to &#39;/cardsavr_cards&#39;, the second page of 25 results would be returned, sorted in descending order by PAR.</p>
<h3 id='parameters'>Parameters</h3>
<p>The paging header takes a JSON stringified object with the following properties. If a paging header is not included, the page of results will use the default values. Results are returned as an array.</p>

<table><thead>
<tr>
<th>Property name</th>
<th>Type</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>integer</td>
<td>The page to be returned</td>
<td>1</td>
</tr>
<tr>
<td>page_length</td>
<td>integer</td>
<td>Length of each page</td>
<td>25</td>
</tr>
<tr>
<td>sort*</td>
<td>string</td>
<td>Property to sort results by</td>
<td>&quot;id&quot;</td>
</tr>
<tr>
<td>descending</td>
<td>boolean</td>
<td>If true, sorts results in descending order; if false, sorts in ascending order</td>
<td>false</td>
</tr>
</tbody></table>

<p>*Check GET endpoint documentation to see which properties are sort-able</p>
<h2 id='safe-key'>Safe key</h2>
<blockquote>
<p>Safe keys are required to encrypt PII data (email address, address, name) and PCI data (PAN, CVV)  Customers are encouraged to store their own safe keys outside the cardsavr environment.  This prevents the API from examining sensitive data.  If safe key storage is deemed unnecessary (espeically for short lived cardholders), Strivve has the ability to store the safe key on behalf of the customer.  By omitting the safe key when adding cardholders, Strive will generate a safe key and store it along with the cardholder, so there is no need to send a safe key header.  It is strongly encouraged not to use a Strivve managed safe key if cardholders are going to persist for long periods of time.</p>
</blockquote>

<p>Although safe keys are stored with the cardholder, callers cannot persist a safe key on the body of the cardholder.  </p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="p">{</span> <span class="na">email</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">foo@foo.com</span><span class="dl">"</span><span class="p">,</span> <span class="na">cuid</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">samplecuid</span><span class="dl">"</span><span class="p">};</span>
<span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">my_session</span><span class="p">.</span><span class="nx">createCardholder</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="nx">cardholder_safe_key</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">HttpRequestHeaders</span> <span class="n">headers</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpRequestMessage</span><span class="p">().</span><span class="n">Headers</span><span class="p">;</span>
<span class="nf">AddSafeKeyHeader</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">safeKey</span><span class="p">);</span>

<span class="n">PropertyBag</span> <span class="n">bag</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">();</span>
<span class="n">bag</span><span class="p">[</span><span class="s">"id"</span><span class="p">]</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
<span class="n">bag</span><span class="p">[</span><span class="s">"email"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"foo@foo.com"</span><span class="p">;</span>
<span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateUserAsync</span><span class="p">(</span><span class="n">bag</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="s">"id"</span><span class="p">),</span> <span class="n">bag</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="n">headers</span><span class="p">);</span> <span class="c1">//no paging</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">Headers</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">createHeaders</span><span class="o">();</span>
<span class="n">headers</span><span class="o">.</span><span class="na">safeKey</span> <span class="o">=</span> <span class="no">SAFE_KEY</span><span class="o">;</span>
<span class="n">headers</span><span class="o">.</span><span class="na">newSafeKey</span> <span class="o">=</span> <span class="no">NEW_SAFE_KEY</span><span class="o">;</span>

<span class="nc">JsonObject</span> <span class="n">obj</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createJsonBuilder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">"id"</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonObject</span> <span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="s">"/cardsavr_users"</span><span class="o">,</span> <span class="n">obj</span><span class="o">,</span> <span class="n">headers</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.INSTANCE.cardsavr.io/cardsavr_users/1"</span> 
  <span class="nt">-X</span> PUT
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">NlOFNNlKabi7Fn26CLw==</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-new-cardholder-safe-key: +h+W0c9EsgvFLufWnu87iV6ErDF7dpyT5YUEbb/oOIw=}"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-cardholder-safe-key: rttYqkGPHLk2KeK6OD8612gSurKXu0X8W6BTWF3hhGM=}"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
  <span class="nt">-B</span> <span class="s2">"{ </span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">: 1, </span><span class="se">\"</span><span class="s2">cardholder_safe_key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">+h+W0c9EsgvFLufWnu87iV6ErDF7dpyT5YUEbb/oOIw=</span><span class="se">\"</span><span class="s2"> }"</span> 
</code></pre></div>
<p><code>{&#39;cardholder-safe-key&#39;: &#39;rttYqkGPHLk2KeK6OD8612gSurKXu0X8W6BTWF3hhGM=&#39;}</code>
<code>{&#39;new-cardholder-safe-key&#39;: &#39;+h+W0c9EsgvFLufWnu87iV6ErDF7dpyT5YUEbb/oOIw=&#39;}</code></p>

<p>You must send an encrypted cardholder safe key header for each request that involves safe-protected information. Saving users (/cardsavr_users), accounts (/cardsavr_accounts) and cards (/cardsavr_cards) requires the key in order to write encrypted data like PANs and merchant site passwords to the server side safe.  Safe keys can be stored by the third party, or they can optionally be stored by Strivve within Cardsavr. Individual endpoint documentation will indicate if a safe key header is required.</p>

<p>When rotating a safe key, you must provide a &#39;new-cardholder-safe-key&#39; header.  Both headers are required (new- and existing) in this case.</p>

<p>See the <a href="https://swch.github.io/slate/?javascript#safe-key">cardholder safe key section</a> for more information on generating and using safe keys.</p>
<h1 id='api-usage'>API Usage</h1>
<p>Query parameter filters can be used with GET requests that do not have an ID path parameter (i.e. &#39;/cardsavr_cards&#39; but not &#39;/cardsavr_cards/123&#39;). When using a query filter, you must place a &#39;?&#39; after the endpoint (preceding the first query filter). Mutiple query filters must be separated by an &#39;&amp;&#39;. There are six filter types in CardSavr:</p>
<h2 id='get-filters'>GET Filters</h2>
<blockquote>
<p>Filters can be aggregated together to apply multiple filters</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">merchants</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getMerchantSites</span><span class="p">({</span> <span class="na">top_hosts</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">amazon.com,apple.com</span><span class="dl">"</span><span class="p">,</span> <span class="na">exclude_hosts</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">walmart.com</span><span class="dl">"</span> <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">MerchantSite</span><span class="p">&gt;&gt;</span> <span class="n">merchants</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">GetMerchantSitesAsync</span><span class="p">(</span>
    <span class="k">new</span> <span class="nf">NameValueCollection</span><span class="p">()</span> <span class="p">{</span>
        <span class="p">{</span> <span class="s">"top_hosts"</span><span class="p">,</span> <span class="s">"amazon.com,apple.com"</span><span class="p">},</span> <span class="p">{</span><span class="s">"exclude_hosts"</span><span class="p">,</span> <span class="s">"walmart.com"</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">NameValuePair</span><span class="o">&gt;</span> <span class="n">filters</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="mi">1</span><span class="o">);</span>
  <span class="n">filters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">BasicNameValuePair</span><span class="o">(</span><span class="s">"tags"</span><span class="o">,</span> <span class="s">"canada"</span><span class="o">));</span>
  <span class="nc">JsonArray</span> <span class="n">response</span> <span class="o">=</span> <span class="o">(</span><span class="nc">JsonArray</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/merchant_sites"</span><span class="o">,</span> <span class="n">filters</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.INSTANCE.cardsavr.io/cardsavr_users?top_hosts=amazon.com,apple.com&amp;exclude_hosts=walmart.com"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">NlOFNNlKabi7Fn26CLw==</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div><h3 id='singular-filters'>Singular filters</h3>
<p><strong>Singular filters</strong> select for results with one specific value. If the property has a unique constraint (e.g. &quot;username&quot; for &#39;/cardsavr_users&#39;), the singular filter can only select one object.</p>

<p>For string properties, singular filters always use <strong>partial</strong> matching, meaning they will match any string that contains the filter value as a substring.</p>
<h3 id='multiple-filters'>Multiple filters</h3>
<p><strong>Multiple filters</strong> select for any object containing one of the specified values for a property. Multiple values must be separated by commas and no spaces. A single value can be submitted for multiple filter, as well.</p>

<p>Multiple filters for string properties always use <strong>partial</strong> matching, meaning they will match any string that contains the filter value as a substring.</p>

<aside class="notice">
"/cardsavr_accounts?cardholder_ids=1,2,3" would return accounts associated with the cardholders that have the IDs 1, 2, and 3.
</aside>
<h3 id='starts-with-filters'>Starts-with filters</h3>
<p><strong>Starts-with</strong> filters select all objects where the property value begins with the provided query value.</p>

<aside class="notice">
"/merchant_sites?name_starts_with=a" returns all sites with names beginning with A (e.g. names of "Apple", "Amazon", "Atlantis").
</aside>
<h3 id='top-filters'>Top filters</h3>
<p><strong>Top filters</strong> select for objects with specified properties to be returned first, in the order specified.</p>

<aside class="notice">
"/merchant_sites?top_ids=2,4,6" would return an array with sites with IDs 2,4,6 in the 1st, 2nd, and 3rd index positions, respectively, with any additional matching objects returned after.
</aside>
<h3 id='include-exclude-filters'>Include/exclude filters</h3>
<p><strong>Include filters</strong> select for any objects that have the specified property value. Unlike multiple filters, include filters use exact matching.</p>

<aside class="notice">
"/cardsavr_users?roles_include=developer,analysts" returns users with roles of developer and analyst.
"/cardsavr_users?roles_include=dev,ana" would return no users, as "dev" and "ana" are not roles defined in CardSavr.
</aside>

<p><strong>Exclude filters</strong> select for any objects that do NOT have the specified property value.  Exclude filters use exact matching.</p>

<aside class="notice">
"/cardsavr_users?roles_exclude=cardholder,admin" filters out users with the roles cardholder and admin.
</aside>
<h3 id='min-max-filters'>Min/Max filters</h3>
<p><strong>Max filters</strong> select for objects that have a value equal to or less than the specified value.</p>

<aside class="notice">
"/cardsavr_accounts?created_on_max=2018-04-20T23:10:36.657Z" returns accounts that were created on or before the date string 2018-04-20T23:10:36.657Z.
</aside>

<p><strong>Min filters</strong> select for any objects that have a value equal to or greater than the specified value.</p>

<aside class="notice">
'/cardsavr_accounts?created_on_min=2018-04-20T23:10:36.657Z' returns accounts that were created on or after the date string 2018-04-20T23:10:36.657Z.
</aside>
<h2 id='cascading-delete'>Cascading DELETE</h2>
<blockquote>
<p>Deleting user 123 will delete their corresponding jobs, cards, and addresses.  Their job results will remain.</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">deleteCardholder</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span> 
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">DeleteCardholderAsync</span><span class="p">(</span><span class="m">123</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="n">session</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/cardholder"</span><span class="o">,</span> <span class="mi">123</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.INSTANCE.cardsavr.io/cardsavr_users"</span> 
  <span class="nt">-X</span> DELETE
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">NlOFNNlKabi7Fn26CLw==</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-B</span> <span class="s2">"{ </span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">: 123 }"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<p>A successful DELETE request will also delete any object that references the deleted object. The additional object types that will be deleted for a particular DELETE endpoint are listed in the individual endpoint documentation.</p>

<p>For example, a successful DELETE request to &#39;/cardsavr_accounts/123&#39; would also delete any single-site jobs that reference the account with ID 123, as single-site jobs contain a foreign key reference to an account.</p>
<h2 id='plural-post'>Plural POST</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createSingleSiteJobs</span><span class="p">([{</span><span class="dl">"</span><span class="s2">cardholder_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">account_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">REQUESTED</span><span class="dl">"</span><span class="p">},</span> 
                                    <span class="p">{</span><span class="dl">"</span><span class="s2">cardholder_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="dl">"</span><span class="s2">account_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">REQUESTED</span><span class="dl">"</span><span class="p">}]);</span> 
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="c1">//unsupported</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonArray</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createArrayBuilder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Json</span><span class="o">.</span><span class="na">createJsonBuilder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">"cardholder_id"</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="s">"account_id"</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="s">"REQUESTED"</span><span class="o">).</span><span class="na">build</span><span class="o">())</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Json</span><span class="o">.</span><span class="na">createJsonBuilder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">"cardholder_id"</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="s">"account_id"</span><span class="o">,</span> <span class="mi">2</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="s">"REQUESTED"</span><span class="o">).</span><span class="na">build</span><span class="o">())</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">await</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/place_card_on_single_site_jobs"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.INSTANCE.cardsavr.io/place_card_on_single_site-jobs"</span> 
  <span class="nt">-X</span> POST
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">NlOFNNlKabi7Fn26CLw==</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-B</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">cardholder_id</span><span class="se">\"</span><span class="s2">: 1, </span><span class="se">\"</span><span class="s2">account_id</span><span class="se">\"</span><span class="s2">: 1, </span><span class="se">\"</span><span class="s2">status</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">REQUESTED</span><span class="se">\"</span><span class="s2">}, {</span><span class="se">\"</span><span class="s2">cardholder_id</span><span class="se">\"</span><span class="s2">: 1, </span><span class="se">\"</span><span class="s2">account_id</span><span class="se">\"</span><span class="s2">: 2, </span><span class="se">\"</span><span class="s2">status</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">REQUESTED</span><span class="se">\"</span><span class="s2">}]"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<p>Some objects support bulk creation (e.g. single site jobs).  This is accomplished by passing in array of objects rather than simply a single object.  </p>
<h2 id='plural-put-delete'>Plural PUT/DELETE</h2>
<p>Some objects support updating and deleting using the standard filter parameters (e.g. single site jobs).  This is noted in the per-object documentation.</p>
<h2 id='request-hydration-on-post'>Request Hydration on POST</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createSingleSiteJob</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span> 
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="c1">//unsupported</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(...</span> <span class="c1">//various nested properties using JsonObjects and JsonArrays (JsonValues)</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">await</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/place_card_on_single_site_jobs"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.INSTANCE.cardsavr.io/place_card_on_single_site-jobs"</span> 
  <span class="nt">-X</span> POST
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">NlOFNNlKabi7Fn26CLw==</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-B</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">cardholder_id</span><span class="se">\"</span><span class="s2">: 1, </span><span class="se">\"</span><span class="s2">account_id</span><span class="se">\"</span><span class="s2">: 1, </span><span class="se">\"</span><span class="s2">status</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">REQUESTED</span><span class="se">\"</span><span class="s2">}, {</span><span class="se">\"</span><span class="s2">cardholder_id</span><span class="se">\"</span><span class="s2">: 1, </span><span class="se">\"</span><span class="s2">account_id</span><span class="se">\"</span><span class="s2">: 2, </span><span class="se">\"</span><span class="s2">status</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">REQUESTED</span><span class="se">\"</span><span class="s2">}]"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REQUESTED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cardholder"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"cuid"</span><span class="p">:</span><span class="s2">"{{CARDHOLDER_UNIQUE_KEY}}"</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="nl">"card"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"cardholder_ref"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{CARDHOLDER_UNIQUE_KEY}}"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"par"</span><span class="p">:</span><span class="s2">"peLpzDnEHdhiiWEtuhUgIbN{{CARDHOLDER_UNIQUE_KEY}}"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pan"</span><span class="p">:</span><span class="s2">"KOnalFfwdrBXlZD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cvv"</span><span class="p">:</span><span class="s2">"123"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"expiration_month"</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span><span class="w">
      </span><span class="nl">"expiration_year"</span><span class="p">:</span><span class="mi">24</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name_on_card"</span><span class="p">:</span><span class="s2">"FirstName LastName"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"cardholder_ref"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"cuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{CARDHOLDER_UNIQUE_KEY}}"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"first_name"</span><span class="p">:</span><span class="s2">"Switch"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"last_name"</span><span class="p">:</span><span class="s2">"Strivve"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"address1"</span><span class="p">:</span><span class="s2">"SGTClNSCCMqlfjuzTmJuepDyFgvWhlCMRycXlKGiRIooOJJkoXeObOcAwJMGeqjSDWfhTHobAWMimcCynMIQcvlBFSbMQlwUFyJ"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"address2"</span><span class="p">:</span><span class="s2">"AyFgoCTjCLXUQVylBAfkHJOtqkkKJjuaLHnmJpSctqBOQueIvciyAUPqYoFpkiAPlkGjgPuabhAPCHFPvaxciObOmIBvBUWpngD"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"city"</span><span class="p">:</span><span class="s2">"Seattle"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"subnational"</span><span class="p">:</span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="s2">"98177"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"country"</span><span class="p">:</span><span class="s2">"USA"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"is_primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="nl">"account"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"cardholder_ref"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{CARDHOLDER_UNIQUE_KEY}}"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"merchant_site_id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"bad_email"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"password"</span><span class="p">:</span><span class="s2">"good_password"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Some objects support posting multiple nested objects to avoid multiple server calls.  This is supported by the Single Site Job, Card, Account and Address APIs.  For example, a Job can be posted with a nested cardholder, account, and a card (the card can even have a nested address).  This is currently only supported when single jobs are posted, not with Plural POSTs.  </p>

<p>If a nested cardholder is referenced by multiple objects, the nested object should reference the created instance using the cardholder cuid.  Notice the body required on the request to the right.  A cardholder_ref parameter is required on card, account, and address entities to ensure the correstponding cardholder_id properties are filled in properly. </p>
<h1 id='passwords-and-authorization'>Passwords and Authorization</h1><h2 id='authorize-cardholder'>Authorize cardholder</h2>
<blockquote>
<p>Credential grants are very important for handing off responbility to a downstream client.  The grants must be provisioned by a user that can create grants (like a customer_agent), and the grant is one-time-use for 3 minutes.  Grants are created when cardholders are created, and can be used as part of the authorize endpoint within the client by an agent (generally a cardholder_agent).</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">CardsavrSession</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">()</span> <span class="dl">"</span><span class="s2">@strivve/strivve-sdk/lib/cardsavr/CardsavrJSLibrary-2.0</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">//agent_session is the session of a cardholder agent.  Cardholder agents are lower </span>
<span class="c1">//privileged agents that can authorize themselves using grants created upstream when cardholder are created.</span>
<span class="kd">const</span> <span class="nx">login</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">agent_session</span><span class="p">.</span><span class="nx">authorizeCardholder</span><span class="p">(</span><span class="nx">grant</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">agent_session</span><span class="p">.</span><span class="nx">createSingleSiteJob</span><span class="p">(</span><span class="nx">job</span><span class="p">);</span> <span class="c1">//agent can now act on behalf of cardholder</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">Switch.CardSavr.Http</span><span class="p">;</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">UserLogin</span><span class="p">&gt;</span> <span class="n">login</span> <span class="p">=</span> <span class="k">await</span> <span class="n">agentSession</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="nf">authorizeCardholder</span><span class="p">(</span><span class="n">grant</span><span class="p">);</span>
<span class="c1">//user can now act on behalf of cardholder</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.strivve.CardsavrSession</span>

<span class="nc">JsonObject</span> <span class="n">login</span> <span class="o">=</span> <span class="n">agentSession</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/cardholder/authorize"</span><span class="o">,</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">"grant"</span><span class="o">,</span> <span class="n">grant</span><span class="o">).</span><span class="na">build</span><span class="o">(),</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span> 
<span class="c1">//user can now act on behalf of cardholder</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#session must first be started, and must have permissions to create grants</span>
curl <span class="nt">-iv</span> 
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="s2">"https://api.INSTANCE.cardsavr.io/cardholder/{{GRANT}}/authorize"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<blockquote>
<p>Grants are always 38 characters, are one time use, and expire after 3 minutes.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"user_credential_grant"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9ey"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path'>Path</h3>
<p>GET /cardsavr_users/:id/credential_grant</p>
<h3 id='description'>Description</h3>
<p>Returns a credential grant for specified user. This grant can be included with an authorize endpoint call ONCE within three minutes of being created.</p>
<h2 id='update-user-password'>Update user password</h2>
<blockquote>
<p>Password updates for non-agents must supply the old_password</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">CardsavrSession</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">()</span> <span class="dl">"</span><span class="s2">@strivve/strivve-sdk/lib/cardsavr/CardsavrJSLibrary-2.0</span><span class="dl">"</span><span class="p">;</span>

<span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">updatePassword</span><span class="p">(</span><span class="nx">user_id</span><span class="p">,</span> <span class="p">{</span> <span class="na">password</span> <span class="p">:</span> <span class="nx">new_password</span><span class="p">,</span> <span class="na">password_copy</span> <span class="p">:</span> <span class="nx">new_password</span><span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">Switch.CardSavr.Http</span><span class="p">;</span>

<span class="n">PropertyBag</span> <span class="n">bag</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">();</span>
<span class="n">bag</span><span class="p">[</span><span class="s">"old_password"</span><span class="p">]</span> <span class="p">=</span> <span class="n">old_password</span><span class="p">;</span>
<span class="n">bag</span><span class="p">[</span><span class="s">"password"</span><span class="p">]</span> <span class="p">=</span> <span class="n">new_password</span><span class="p">;</span>
<span class="n">bag</span><span class="p">[</span><span class="s">"password_copy"</span><span class="p">]</span> <span class="p">=</span> <span class="n">new_password</span><span class="p">;</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">PropertyBag</span><span class="p">&gt;</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateUserPasswordAsync</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">bag</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"old_password"</span><span class="o">,</span> <span class="n">old_password</span><span class="o">)</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="n">password</span><span class="o">)</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"password_copy"</span><span class="o">,</span> <span class="n">password_copy</span><span class="o">)</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>

<span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"/users/%d/update_password"</span><span class="o">,</span> <span class="n">userId</span><span class="o">);</span>
<span class="nc">JsonObject</span> <span class="n">response</span> <span class="o">=</span> <span class="o">(</span><span class="nc">JsonObject</span><span class="o">)</span> <span class="n">session</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#old_pass is not required for privileged admins.  Users must provide their old password</span>
curl <span class="nt">-iv</span>  <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">3ysXPhntmPDU7xUFYKbc/4Aq=WVrhExdjHQsx5FgV2pZ</span><span class="se">\"</span><span class="s2">, 
  </span><span class="se">\"</span><span class="s2">password_copy</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">3ysXPhntmPDU7xUFYKbc/4Aq=WVrhExdjHQsx5FgV2pZ</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="s2">"https://api.INSTANCE.cardsavr.io/cardsavr_users/:id/credential_grant"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span>  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-2'>Path</h3>
<p>PUT /cardsavr_users/:id/update_password</p>
<h3 id='description-2'>Description</h3>
<p>Updates CardSavr user password key. Partners are responsible for rotating their agent role password keys every 90 days. Cardholder roles cannot have passwords and must log in using credential grants.</p>

<aside class="notice">
Most password updates can be done via the [Partner Portal](https://developers.strivve.com/resources/partner-portal/), however customer_agent and cardholder_agent password are the responsibility of the partner to rotate.
</aside>
<h3 id='body-parameters'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Desription</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>string</td>
<td>yes</td>
<td>New password key</td>
</tr>
<tr>
<td>password_copy</td>
<td>string</td>
<td>yes</td>
<td>Copy of new password key</td>
</tr>
<tr>
<td>old_password</td>
<td>string</td>
<td>not always</td>
<td>Privileged accounts can reset users&#39; passwords without the old key</td>
</tr>
</tbody></table>
<h1 id='session'>Session</h1>
<p>Session endpoints are used for session login, and termination.</p>
<h2 id='user-login'>User login</h2>
<blockquote>
<p>To create a new session and authorize a login call is required:</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">CardsavrSession</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">()</span> <span class="dl">"</span><span class="s2">@strivve/strivve-sdk/lib/cardsavr/CardsavrJSLibrary-2.0</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">session</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CardsavrSession</span><span class="p">(</span><span class="nx">cardsavr_server</span><span class="p">,</span> 
    <span class="nx">app_key</span><span class="p">,</span> <span class="nx">app_name</span><span class="p">,</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">login_data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">Switch.CardSavr.Http</span><span class="p">;</span>

<span class="n">CardSavrHttpClient</span> <span class="n">session</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CardSavrHttpClient</span><span class="p">(</span><span class="n">_cardsavrServer</span><span class="p">,</span> 
  <span class="n">_appKey</span><span class="p">,</span> <span class="n">_appName</span><span class="p">,</span> <span class="n">userName</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>
<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">LoginResult</span><span class="p">&gt;</span> <span class="n">login</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">Init</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.strivve.CardsavrSession</span><span class="o">;</span>

<span class="k">this</span><span class="o">.</span><span class="na">session</span> <span class="o">=</span> <span class="nc">CardsavrSession</span><span class="o">.</span><span class="na">createSession</span><span class="o">(</span><span class="n">integratorName</span><span class="o">,</span> <span class="n">integratorKey</span><span class="o">,</span> <span class="n">apiServer</span><span class="o">);</span>
<span class="nc">JsonObject</span> <span class="n">obj</span> <span class="o">=</span> <span class="o">(</span><span class="nc">JsonObject</span><span class="o">)</span> <span class="n">session</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
<span class="c1">//throws CardsavrRESTException</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-iv</span> <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">PASSWORD</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">userName</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">USERNAME</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="s2">"https://api.INSTANCE.cardsavr.io/session/login"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span>  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<blockquote>
<p>The login call both starts and authorizes a new session and returns the user, along with a public key to be used in generating a new API  Session Key to sign and encrypt future requests on the session. See <a href="https://developers.strivve.com/resources/cryptography/">API Session Keys</a> for information on using Server&#39;s public key. Return a session token to be used with all subsequent calls on the session.  This value is sent with the &quot;x-cardsavr-session-jwt&quot; header. If you are debugging with cURL or Postman, cookies are used in lieu of session tokens.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"serverPublicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_public_key"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="err">eyJhbGciOiJIUzI</span><span class="mi">1</span><span class="err">NiIsInR</span><span class="mi">5</span><span class="err">cCI</span><span class="mi">6</span><span class="err">IkpXVCJ</span><span class="mi">9</span><span class="err">.eyJqdGkiOiI</span><span class="mi">4</span><span class="err">ZjJkYjQ</span><span class="mi">1</span><span class="err">OS</span><span class="mi">1</span><span class="err">kODMzLTQ</span><span class="mi">2</span><span class="err">NmItOGE</span><span class="mi">0</span><span class="err">MS</span><span class="mi">1</span><span class="err">mYzcwMzA</span><span class="mi">1</span><span class="err">M</span><span class="mi">2</span><span class="err">QwZGIiLCJpc</span><span class="mi">3</span><span class="err">MiOiJhcGkuZ</span><span class="mi">3</span><span class="err">RvbWxpbnNvbi</span><span class="mi">5</span><span class="err">jYXJkc</span><span class="mi">2</span><span class="err">F</span><span class="mi">2</span><span class="err">ci</span><span class="mi">5</span><span class="err">pbyIsImF</span><span class="mi">1</span><span class="err">ZCI</span><span class="mi">6</span><span class="err">ImFwaS</span><span class="mi">5</span><span class="err">ndG</span><span class="mi">9</span><span class="err">tbGluc</span><span class="mi">29</span><span class="err">uLmNhcmRzYXZyLmlvIiwiaWF</span><span class="mi">0</span><span class="err">IjoxNTk</span><span class="mi">5</span><span class="err">NzY</span><span class="mi">5</span><span class="err">NDQ</span><span class="mi">2</span><span class="err">fQ.slI</span><span class="mi">13</span><span class="err">GGNot</span><span class="mi">8</span><span class="err">SU_hPdzXzZrjcv</span><span class="mi">90</span><span class="err">G</span><span class="mi">43</span><span class="err">etofgh</span><span class="mi">9</span><span class="err">HotNj</span><span class="mi">0</span><span class="s2">",
  "</span><span class="err">status</span><span class="s2">": "</span><span class="err">valid_password</span><span class="s2">",
  "</span><span class="err">success</span><span class="s2">": true,
  "</span><span class="err">user_id</span><span class="s2">": 123,
  "</span><span class="err">user</span><span class="s2">": 
  {
    "</span><span class="err">id</span><span class="s2">": 123,
    "</span><span class="err">username</span><span class="s2">": "</span><span class="err">john_smith_</span><span class="mi">123</span><span class="s2">",
    "</span><span class="err">first_name</span><span class="s2">": "</span><span class="err">John</span><span class="s2">",
    "</span><span class="err">last_name</span><span class="s2">": "</span><span class="err">Smith</span><span class="s2">",
    "</span><span class="err">email</span><span class="s2">": "</span><span class="err">jsmith@email.com</span><span class="s2">",
    "</span><span class="err">is_locked</span><span class="s2">": true,
    "</span><span class="err">role</span><span class="s2">": "</span><span class="err">dev</span><span class="s2">",
    "</span><span class="err">created_on</span><span class="s2">": "</span><span class="mi">2018-04-19</span><span class="err">T</span><span class="mi">23</span><span class="err">:</span><span class="mi">10</span><span class="err">:</span><span class="mf">36.657</span><span class="err">Z</span><span class="s2">",
    "</span><span class="err">last_updated_on</span><span class="s2">": null
  }
}
</span></code></pre></div><h3 id='path-3'>Path</h3>
<p>POST /session/login</p>
<h3 id='description-3'>Description</h3>
<p>Login user into a CardSavr session</p>
<h3 id='body-parameters-2'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Desription</th>
</tr>
</thead><tbody>
<tr>
<td>clientPublicKey</td>
<td>string</td>
<td>yes</td>
<td>The base 64 encoded NIST point 256 (P256) elliptic curve public key  from the key pair generated by the calling application. See <a href="https://developers.strivve.com/resources/cryptography/">Curve Private Key</a></td>
</tr>
<tr>
<td>userName</td>
<td>string</td>
<td>yes</td>
<td>user name for this user</td>
</tr>
<tr>
<td>passwordProof</td>
<td>string</td>
<td>no</td>
<td>The base 64 encoded HMAC-256 signature zero-knowledge-proof of the password. See [zero-knowedge-proof] for more information. This parameter is mutually exclusive of the &#39;password&#39; and &#39;userCredentialGrant&#39; parameters.</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>no</td>
<td>User&#39;s plain text password when using Postman or Curl on a development environment. This parameter is mutually exclusive of the &#39;passwordProof&#39; and &#39;userCredentialGrant&#39; parameters.</td>
</tr>
</tbody></table>

<p></a=zero-knowledge-proof></a></p>
<h3 id='zero-knowledge-proof-password'>Zero Knowledge Proof Password</h3>
<p>The CardSavr service uses a zero-knowledge-proof mechanism with passwords during login.  The proof is done by producing a key derivation from the username/password and producing a HMAC-256 signature that can be verified by the CardSavr server.  This is done to prevent the server from ever knowing the password. See <a href="https://developers.strivve.com/resources/cryptography/">zero knowledge proof</a> for more information.</p>
<h2 id='end-session'>End session</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">CardsavrSession</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">()</span> <span class="dl">"</span><span class="s2">@strivve/strivve-sdk/lib/cardsavr/CardsavrJSLibrary-2.0</span><span class="dl">"</span><span class="p">;</span>

<span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="c1">//or if using the CardsavrHelper, the cache must be cleaned up</span>
<span class="c1">//await helper.endSession(username);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">Switch.CardSavr.Http</span><span class="p">;</span>

<span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">EndAsync</span><span class="p">();</span>
<span class="c1">//or if using CardSavrHelper, you need to release the session from the cache</span>
<span class="c1">//await helper.CloseSession(userName);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.strivve.CardsavrSession</span><span class="o">;</span>

<span class="nc">JsonObject</span> <span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">end</span><span class="o">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#session must first be started</span>
curl <span class="nt">-iv</span> <span class="nt">-d</span> <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="s2">"https://api.INSTANCE.cardsavr.io/session/end"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span>  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<blockquote>
<p>Session end returns a 200 with no body</p>
</blockquote>
<h3 id='path-4'>Path</h3>
<p>GET /session/end/</p>
<h3 id='description-4'>Description</h3>
<p>Ends the current user session.</p>
<h1 id='accounts'>Accounts</h1>
<p>Account objects contain the account information, such as username and password, for a particular cardhoder. They are used to log in to a cardholder&#39;s account for placing a payment card.</p>
<h2 id='get-account'>Get account</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_accounts/694309450
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">accounts</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getAccounts</span><span class="p">(</span><span class="mi">694309450</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Accounts</span><span class="p">&gt;</span> <span class="n">accounts</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetAccountsAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">accounts</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/cardsavr_accounts"</span><span class="o">,</span> <span class="mi">694309450</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">694309450</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_password_update"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1986-10-03T00:20:44.008Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_saved_card"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-03-08T17:26:05.681Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1995-10-21T19:39:33.753Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1979-12-16T20:06:10.582Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cardholder"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">109815479</span><span class="p">,</span><span class="w">
    </span><span class="nl">"financial_institution_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1070671782</span><span class="p">,</span><span class="w">
    </span><span class="nl">"agent_session_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NuGAMZW"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ephemeral"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KdJtagPFUWsThrZBuw"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gHUDluyMklgX@FpEVqV.FKC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"meta_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Yrc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cardholder_safe_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WJhGAnQYbo0oG6WU0vdEIXfJ3xScnfXilKj+W+xOxFU="</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"JCtQXvKftSXg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"@}CS!L*Q"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rPmHFCREOUzP"</span><span class="p">:</span><span class="w"> </span><span class="mi">38</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kPOLfyWaenVJ"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1999-09-23T15:08:48.429Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1974-10-14T10:16:31.629Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"merchant_site"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2095740797</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fJaPbPVTMfFcdMrSpiPrSlLgatpcHs"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iPLlRbhCzMZRYcvpNuFXH"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"-^&gt;c)9pikq!M"</span><span class="p">,</span><span class="w">
      </span><span class="mi">81</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kKn$}TER{llPFUhU1x$U&amp;P.^&amp;xOcK"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"queue_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vbs_queue"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"required_form_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">")~nissZiE_.tN#!U%4jFfoLB&gt;014w"</span><span class="p">,</span><span class="w">
      </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="s2">"N/QQXR+gCS"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"rrXYkRmpfvLP"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+~P#W,L%I,e0f&lt;&gt;NTF{E"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mGJtsSFqIuac"</span><span class="p">:</span><span class="w"> </span><span class="mi">91</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ULpKOOKXBgfz"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"mOaZZSxoNUMi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vanqka61f#-iyX"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"frPyYdUJHdbd"</span><span class="p">:</span><span class="w"> </span><span class="mi">49</span><span class="p">,</span><span class="w">
        </span><span class="nl">"jsIsplGKnaxv"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"JNQZptaEagrG"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cp9X%,TwHTASfE~^C#E,KoZ/+"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"rqNHSGnaYBsX"</span><span class="p">:</span><span class="w"> </span><span class="mi">87</span><span class="p">,</span><span class="w">
        </span><span class="nl">"BKZhPnnvhfqN"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"account_identification"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ZUXSempzatfr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0~N,TVp&lt;ILNT]![T]#W!"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"nFeQldatrDXt"</span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w">
      </span><span class="nl">"wAsEIctfHzoO"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"nRDYrerQUFKD"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/gdMqQ9e~%dja==y"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"IQWLvnrIPPCe"</span><span class="p">:</span><span class="w"> </span><span class="mi">56</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lnmNzJCvyuUH"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"mfa"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"move_mouse_to_element"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"proxy_order"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"QS_+VW"</span><span class="p">,</span><span class="w">
      </span><span class="mi">28</span><span class="p">,</span><span class="w">
      </span><span class="s2">"@z=qtLtdz"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"credit_card_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gZuYOm"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"forgot_password_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FdDYYI"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quick_start"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"login_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"aNaSrtjgXRyX"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V^q/r&lt;17D{IFjYtld4K["</span><span class="p">,</span><span class="w">
      </span><span class="nl">"vKNiywNmGEDC"</span><span class="p">:</span><span class="w"> </span><span class="mi">29</span><span class="p">,</span><span class="w">
      </span><span class="nl">"QLKgxmKOHZBV"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cardsavr_card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1280636560</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bin_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">434066140</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cvv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fGt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expiration_month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expiration_year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"i"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name_on_card"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LRmBUsLZAxLdsEzTXuKZDDESevsUDkrtjLKpyFzOLXfMNrEBwZOGPLQQtglDmVosCPoOWMlODiwJFSMftyqjdmpEEDEKKsZNmBopMPJQAqPhcRQuIxjGpcKJQibMghvSxOsswqsCKogXvGZrbxuiaVIpCFhgHKPZYWyihfdQVhAwvSwITLnCejTuazRTmFxucHlUkWAkwuGWRtRFyogQfZBhjtZgJHUesXVXUrtsXfhDRAHwYautuJnrYRkDSz"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_6"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cYSIvqaLqnZiYdSdfsreeyDhaSadWYGs"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_7"</span><span class="p">:</span><span class="w"> </span><span class="s2">"teCsgCLegIgkdmQGArHPFezwNPDjaCzC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_8"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zAeSeiwctljiOImuoMZwQVAnhDfZhklZ"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2002-09-17T04:38:57.458Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2007-03-23T12:58:49.078Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"customer_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZHPrKqzsQyVQYj"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path'>Path</h3>
<p>GET /cardsavr_accounts <strong>(batch)</strong> or GET /cardsavr_accounts/:id <strong>(singular)</strong></p>
<h3 id='description'>Description</h3>
<p>Returns the account specified by the provided ID</p>
<h4 id='batch-get-requests'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable accounts, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/cardsavr_accounts?ids=1,2</code></p>
<h4 id='singular-get-requests'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the account matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/cardsavr_accounts/694309450</code></p>
<h3 id='response-attributes'><a name="response-cardsavr_account"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>last_card_placed_id</td>
<td>number (fk)</td>
<td>ID of the last card placed on this account by the Virtual Browser System (VBS).</td>
</tr>
<tr>
<td>last_password_update</td>
<td>date</td>
<td></td>
</tr>
<tr>
<td>last_saved_card</td>
<td>date</td>
<td>Date of last card saved on this account.</td>
</tr>
<tr>
<td>created_on</td>
<td>date</td>
<td>Date this site was created on</td>
</tr>
<tr>
<td>last_updated_on</td>
<td>date</td>
<td>Date this site was last updated on</td>
</tr>
<tr>
<td>cardholder_id</td>
<td>number (fk)</td>
<td>ID of the cardholder associated with this account.</td>
</tr>
<tr>
<td>merchant_site_id</td>
<td>number (fk)</td>
<td>ID of the merchant site associated with this account.</td>
</tr>
<tr>
<td>customer_key</td>
<td>string</td>
<td>A key of merchant host and cuid. This can potentially violate a constraint with two accounts of the same merchant site.</td>
</tr>
</tbody></table>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>cardholder_ids</li>
<li>merchant_site_ids</li>
<li>customer_key</li>
<li>last_card_placed_ids</li>
<li>last_password_update_min / last_password_update_max</li>
<li>last_saved_card_min / last_saved_card_max</li>
<li>created_on_min / created_on_max</li>
<li>last_updated_on_min / last_updated_on_max</li>
</ul>
<h2 id='create-account'>Create account</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">account</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createAccount</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">cardholder_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1384603620</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">merchant_site_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">462474002</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">customer_key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">NZHPrKqzsQyVQYj</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">last_card_placed_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1367117943</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">jsmith123</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI=</span><span class="dl">"</span>
<span class="p">},</span> <span class="nx">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"cardholder_id"</span><span class="p">,</span> <span class="m">1384603620</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"merchant_site_id"</span><span class="p">,</span> <span class="m">462474002</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"customer_key"</span><span class="p">,</span> <span class="s">"NZHPrKqzsQyVQYj"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"last_card_placed_id"</span><span class="p">,</span> <span class="m">1367117943</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"username"</span><span class="p">,</span> <span class="s">"jsmith123"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"password"</span><span class="p">,</span> <span class="s">"BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI="</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Account</span><span class="p">&gt;</span> <span class="n">account</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">CreateAccountAsync</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"cardholder_id"</span><span class="o">,</span> <span class="mi">1384603620</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"merchant_site_id"</span><span class="o">,</span> <span class="mi">462474002</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"customer_key"</span><span class="o">,</span> <span class="s">"NZHPrKqzsQyVQYj"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"last_card_placed_id"</span><span class="o">,</span> <span class="mi">1367117943</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="s">"jsmith123"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="s">"BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI="</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">account</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/cardsavr_accounts"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">cardholder_id</span><span class="se">\"</span><span class="s2">:1384603620,</span><span class="se">\"</span><span class="s2">merchant_site_id</span><span class="se">\"</span><span class="s2">:462474002,</span><span class="se">\"</span><span class="s2">customer_key</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">NZHPrKqzsQyVQYj</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">last_card_placed_id</span><span class="se">\"</span><span class="s2">:1367117943,</span><span class="se">\"</span><span class="s2">username</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">jsmith123</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI=</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-cardholder-safe-key: CARDHOLDER_SAFE_KEY"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_accounts/
</code></pre></div><h3 id='path-2'>Path</h3>
<p>POST /cardsavr_accounts</p>
<h3 id='description-2'>Description</h3>
<p>Create a account and return the created object.</p>
<h3 id='body-parameters'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cardholder_id</td>
<td>number</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>merchant_site_id</td>
<td>number</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>customer_key</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>last_card_placed_id</td>
<td>number</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>username</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardsavr_account">account response attributes</a>.</p>

<aside class="notice">Update calls to /cardsavr_accounts require the cardholder's personal cardholder_safe_key header to encrypt and save the username and password when Strivve does not manage keys for a customer (this is an environment setting). The safe keys are also not required if updating non-safe user properties.</aside>
<h2 id='upsert-account'>Upsert account</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">account</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">updateAccount</span><span class="p">(</span><span class="mi">1</span><span class="p">,{</span>
  <span class="dl">"</span><span class="s2">last_card_placed_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1665331030</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">jsmith123</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI=</span><span class="dl">"</span>
<span class="p">},</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"last_card_placed_id"</span><span class="p">,</span> <span class="m">1665331030</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"username"</span><span class="p">,</span> <span class="s">"jsmith123"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"password"</span><span class="p">,</span> <span class="s">"BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI="</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Account</span><span class="p">&gt;</span> <span class="n">account</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateAccountAsync</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"last_card_placed_id"</span><span class="o">,</span> <span class="mi">1665331030</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="s">"jsmith123"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="s">"BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI="</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">account</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/cardsavr_accounts"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">last_card_placed_id</span><span class="se">\"</span><span class="s2">:1665331030,</span><span class="se">\"</span><span class="s2">username</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">jsmith123</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI=</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> PUT <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"cardholder-safe-key: CARDHOLDER_SAFE_KEY"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_accounts/694309450
</code></pre></div><h3 id='path-3'>Path</h3>
<p>PUT /cardsavr_accounts OR /cardsavr_accounts/{id}</p>
<h3 id='description-3'>Description</h3>
<p>Upsert can be used to either update a account, create a new account, or return an existing account.  Either an id or customer_key is required for upsert. The id (in path or body), along with an updated body, can be used to update an existing account; the customer_key (in body) can likewise be used to update a account, and can also be used to create a new account, if the customer_key does not match any existing accounts. If the id or customer_key provided corresponds to a pre-existing account and no updated information has been included in the body, the existing account will be returned.</p>
<h3 id='body-parameters-2'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>last_card_placed_id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>username</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardsavr_account">account response parameters</a>.</p>

<aside class="notice">Update calls to /cardsavr_accounts require the cardholder's personal cardholder_safe_key header to encrypt and save the username and password when Strivve does not manage keys for a customer (this is an environment setting). The safe keys are also not required if updating non-safe properties.</aside>
<h2 id='delete-account'>Delete account</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_accounts/694309450
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">deleteAccount</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Account</span><span class="p">&gt;</span> <span class="n">account</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">DeleteAccountAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">account</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/cardsavr_accounts"</span><span class="o">,</span> <span class="n">undefined</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><h3 id='path-4'>Path</h3>
<p>DELETE /cardsavr_accounts/{id}</p>
<h3 id='description-4'>Description</h3>
<p>Delete a account and purge its <a href="#cascading-delete">related items</a>.  An id is required on every delete request.</p>

<p>See <a href="#response-cardsavr_account">account response parameters</a>.</p>
<h1 id='addresses'>Addresses</h1>
<p>Address objects contain the billing address for a specific cardholder, and are used to populate billing address information on merchant sites. They are linked to cards and cardholders.</p>
<h2 id='get-address'>Get address</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_addresses/239617053
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">addresses</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getAddresses</span><span class="p">(</span><span class="mi">239617053</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Addresses</span><span class="p">&gt;</span> <span class="n">addresses</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetAddressesAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">addresses</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/cardsavr_addresses"</span><span class="o">,</span> <span class="mi">239617053</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">239617053</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Main St."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit A"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Seattle"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subnational"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98177"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"postal_other"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98177-0124"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USA"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"is_primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_email@strivve.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2065555555"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1977-09-12T23:19:52.923Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1986-10-23T05:50:25.749Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cardholder"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">740656930</span><span class="p">,</span><span class="w">
    </span><span class="nl">"financial_institution_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1924495479</span><span class="p">,</span><span class="w">
    </span><span class="nl">"agent_session_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cqjDVHucpvinrvRvbrihmpqXPPzIrPc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ephemeral"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LhtUpoUOJsrxbEVTNfFBnrdBOJtj"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VSdrUeBmFR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XDDDiKfNtQJl@GVmnQG.xZP"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"meta_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUzvsEjzKZuf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cardholder_safe_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruihhfH02qAzK7hcXBcJl6v+9O79pAUWeBevjogd2lo="</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ehiPEWdqtjQs"</span><span class="p">:</span><span class="w"> </span><span class="s2">"_$JXwP_l%DE&gt;v&gt;5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kTGWhlmnYFvC"</span><span class="p">:</span><span class="w"> </span><span class="mi">75</span><span class="p">,</span><span class="w">
      </span><span class="nl">"gPesslFmBxAx"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1977-12-07T21:47:54.617Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1979-06-22T00:41:32.764Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-5'>Path</h3>
<p>GET /cardsavr_addresses <strong>(batch)</strong> or GET /cardsavr_addresses/:id <strong>(singular)</strong></p>
<h3 id='description-5'>Description</h3>
<p>Returns the address specified by the provided ID</p>
<h4 id='batch-get-requests-2'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable addresses, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/cardsavr_addresses?ids=1,2</code></p>
<h4 id='singular-get-requests-2'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the address matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/cardsavr_addresses/239617053</code></p>
<h3 id='response-attributes-2'><a name="response-cardsavr_address"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>address1</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>address2</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>subnational</td>
<td>string</td>
<td>Subnational unit (i.e. state or province).</td>
</tr>
<tr>
<td>postal_code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>postal_other</td>
<td>string</td>
<td>E.g. last four digits in a zip-plus-four.</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>is_primary</td>
<td>boolean</td>
<td>Indicates if this is the primary address of this cardholder, as a cardholder can be linked to multiple addresses.</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>phone_number</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>created_on</td>
<td>date</td>
<td>Date this site was created on</td>
</tr>
<tr>
<td>last_updated_on</td>
<td>date</td>
<td>Date this site was last updated on</td>
</tr>
<tr>
<td>cardholder_id</td>
<td>number (fk)</td>
<td>ID of the cardholder associated with this address.</td>
</tr>
</tbody></table>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters-2'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>cardholder_ids</li>
<li>is_primary</li>
<li>first_name</li>
<li>last_name</li>
<li>email</li>
<li>created_on_min / created_on_max</li>
<li>last_updated_on_min / last_updated_on_max</li>
</ul>
<h2 id='create-address'>Create address</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">address</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createAddress</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">cardholder_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">841873456</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">address1</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">123 Main St.</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">address2</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Unit A</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">city</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Seattle</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">subnational</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">WA</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">postal_code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">98177</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">postal_other</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">98177-0124</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">country</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USA</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">is_primary</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">first_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Joe</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">last_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Smith</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test_email@strivve.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">phone_number</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2065555555</span><span class="dl">"</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"cardholder_id"</span><span class="p">,</span> <span class="m">841873456</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"address1"</span><span class="p">,</span> <span class="s">"123 Main St."</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"address2"</span><span class="p">,</span> <span class="s">"Unit A"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"city"</span><span class="p">,</span> <span class="s">"Seattle"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"subnational"</span><span class="p">,</span> <span class="s">"WA"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"postal_code"</span><span class="p">,</span> <span class="s">"98177"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"postal_other"</span><span class="p">,</span> <span class="s">"98177-0124"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"country"</span><span class="p">,</span> <span class="s">"USA"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"is_primary"</span><span class="p">,</span> <span class="k">true</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"first_name"</span><span class="p">,</span> <span class="s">"Joe"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"last_name"</span><span class="p">,</span> <span class="s">"Smith"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"email"</span><span class="p">,</span> <span class="s">"test_email@strivve.com"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"phone_number"</span><span class="p">,</span> <span class="s">"2065555555"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Address</span><span class="p">&gt;</span> <span class="n">address</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">CreateAddressAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"cardholder_id"</span><span class="o">,</span> <span class="mi">841873456</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"address1"</span><span class="o">,</span> <span class="s">"123 Main St."</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"address2"</span><span class="o">,</span> <span class="s">"Unit A"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"city"</span><span class="o">,</span> <span class="s">"Seattle"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"subnational"</span><span class="o">,</span> <span class="s">"WA"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"postal_code"</span><span class="o">,</span> <span class="s">"98177"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"postal_other"</span><span class="o">,</span> <span class="s">"98177-0124"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"country"</span><span class="o">,</span> <span class="s">"USA"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"is_primary"</span><span class="o">,</span> <span class="kc">true</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"Joe"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"Smith"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"email"</span><span class="o">,</span> <span class="s">"test_email@strivve.com"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"phone_number"</span><span class="o">,</span> <span class="s">"2065555555"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">address</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/cardsavr_addresses"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">cardholder_id</span><span class="se">\"</span><span class="s2">:841873456,</span><span class="se">\"</span><span class="s2">address1</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">123 Main St.</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">address2</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Unit A</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">city</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Seattle</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">subnational</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">WA</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">postal_code</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">98177</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">postal_other</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">98177-0124</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">country</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">USA</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">is_primary</span><span class="se">\"</span><span class="s2">:true,</span><span class="se">\"</span><span class="s2">first_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Joe</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">last_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Smith</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">test_email@strivve.com</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">phone_number</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">2065555555</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_addresses/
</code></pre></div><h3 id='path-6'>Path</h3>
<p>POST /cardsavr_addresses</p>
<h3 id='description-6'>Description</h3>
<p>Create a address and return the created object.</p>
<h3 id='body-parameters-3'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cardholder_id</td>
<td>number</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>address1</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>address2</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>subnational</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>postal_code</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>postal_other</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>is_primary</td>
<td>boolean</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>phone_number</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardsavr_address">address response attributes</a>.</p>
<h2 id='update-address'>Update address</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">address</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">updateAddress</span><span class="p">(</span><span class="mi">1</span><span class="p">,{</span>
  <span class="dl">"</span><span class="s2">address1</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">123 Main St.</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">address2</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Unit A</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">city</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Seattle</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">subnational</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">WA</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">postal_code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">98177</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">postal_other</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">98177-0124</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">country</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USA</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">is_primary</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">first_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Joe</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">last_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Smith</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test_email@strivve.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">phone_number</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2065555555</span><span class="dl">"</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"address1"</span><span class="p">,</span> <span class="s">"123 Main St."</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"address2"</span><span class="p">,</span> <span class="s">"Unit A"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"city"</span><span class="p">,</span> <span class="s">"Seattle"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"subnational"</span><span class="p">,</span> <span class="s">"WA"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"postal_code"</span><span class="p">,</span> <span class="s">"98177"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"postal_other"</span><span class="p">,</span> <span class="s">"98177-0124"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"country"</span><span class="p">,</span> <span class="s">"USA"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"is_primary"</span><span class="p">,</span> <span class="k">false</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"first_name"</span><span class="p">,</span> <span class="s">"Joe"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"last_name"</span><span class="p">,</span> <span class="s">"Smith"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"email"</span><span class="p">,</span> <span class="s">"test_email@strivve.com"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"phone_number"</span><span class="p">,</span> <span class="s">"2065555555"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Address</span><span class="p">&gt;</span> <span class="n">address</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateAddressAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"address1"</span><span class="o">,</span> <span class="s">"123 Main St."</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"address2"</span><span class="o">,</span> <span class="s">"Unit A"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"city"</span><span class="o">,</span> <span class="s">"Seattle"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"subnational"</span><span class="o">,</span> <span class="s">"WA"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"postal_code"</span><span class="o">,</span> <span class="s">"98177"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"postal_other"</span><span class="o">,</span> <span class="s">"98177-0124"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"country"</span><span class="o">,</span> <span class="s">"USA"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"is_primary"</span><span class="o">,</span> <span class="kc">false</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"Joe"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"Smith"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"email"</span><span class="o">,</span> <span class="s">"test_email@strivve.com"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"phone_number"</span><span class="o">,</span> <span class="s">"2065555555"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">address</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/cardsavr_addresses"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">address1</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">123 Main St.</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">address2</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Unit A</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">city</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Seattle</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">subnational</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">WA</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">postal_code</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">98177</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">postal_other</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">98177-0124</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">country</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">USA</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">is_primary</span><span class="se">\"</span><span class="s2">:false,</span><span class="se">\"</span><span class="s2">first_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Joe</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">last_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Smith</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">test_email@strivve.com</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">phone_number</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">2065555555</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> PUT <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_addresses/239617053
</code></pre></div><h3 id='path-7'>Path</h3>
<p>PUT /cardsavr_addresses OR /cardsavr_addresses/{id}</p>
<h3 id='description-7'>Description</h3>
<p>Update a address and return the updated object.  An id is required on every update request.</p>
<h3 id='body-parameters-4'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address1</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>address2</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>subnational</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>postal_code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>postal_other</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>is_primary</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>phone_number</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardsavr_address">address response parameters</a>.</p>
<h2 id='delete-address'>Delete address</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_addresses/239617053
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">deleteAddress</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Address</span><span class="p">&gt;</span> <span class="n">address</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">DeleteAddressAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">address</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/cardsavr_addresses"</span><span class="o">,</span> <span class="n">undefined</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><h3 id='path-8'>Path</h3>
<p>DELETE /cardsavr_addresses/{id}</p>
<h3 id='description-8'>Description</h3>
<p>Delete a address and purge its <a href="#cascading-delete">related items</a>.  An id is required on every delete request.</p>

<p>See <a href="#response-cardsavr_address">address response parameters</a>.</p>
<h1 id='bins'>Bins</h1>
<p>A Bank Identification Number (BIN) object represents a BIN used by a financial institution in the CardSavr API. They are linked to cards and FIs and used for reporting purposes.</p>
<h2 id='get-bin'>Get bin</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_bins/500982004
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">bins</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getBins</span><span class="p">(</span><span class="mi">500982004</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Bins</span><span class="p">&gt;</span> <span class="n">bins</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetBinsAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">bins</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/cardsavr_bins"</span><span class="o">,</span> <span class="mi">500982004</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">500982004</span><span class="p">,</span><span class="w">
  </span><span class="nl">"custom_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"uxJMLZvfpbNl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xgJ*(Xe!9A=8ns.#gE].t!&lt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"OnPAiCcflTZU"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mrYMycJpRPWP"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2008-04-26T00:27:13.278Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1971-12-04T13:54:34.257Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"financial_institution"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">797075482</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhSepJrmgnBdpeUIpUjrLLHpnzCfNnmhNxliLPvmQcShESctKZdVIDIRLHUHMnt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lookup_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dwkYLWJrUtIiBBqmqWIkyscjnixKpqJIEjdUClPKktePonGUiopILYcWtAVEDEs"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"alternate_lookup_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DwDidLZfBvthIAsOdxhtkmGimtVxwCFMfESUkYcUKMbSlSZPsdAOMNeUlpuTGrU"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"fFGxfLippvJv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sfF6U946c%E*Q+Q.M=a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"PcBftzMOPLAo"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
      </span><span class="nl">"DwcNEBievpSQ"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1978-07-12T03:34:40.254Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-03-14T16:35:11.238Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"bank_identification_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"49564874"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-9'>Path</h3>
<p>GET /cardsavr_bins <strong>(batch)</strong> or GET /cardsavr_bins/:id <strong>(singular)</strong></p>
<h3 id='description-9'>Description</h3>
<p>Returns the bin specified by the provided ID</p>
<h4 id='batch-get-requests-3'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable bins, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/cardsavr_bins?ids=1,2</code></p>
<h4 id='singular-get-requests-3'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the bin matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/cardsavr_bins/500982004</code></p>
<h3 id='response-attributes-3'><a name="response-cardsavr_bin"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>financial_institution_id</td>
<td>number (fk)</td>
<td>ID of financial institution that this Bank Identification Number belongs to.</td>
</tr>
<tr>
<td>custom_data</td>
<td>object</td>
<td>Custom data (e.g. brand, type) that can be added according to FI need.</td>
</tr>
<tr>
<td>created_on</td>
<td>date</td>
<td>Date this site was created on</td>
</tr>
<tr>
<td>last_updated_on</td>
<td>date</td>
<td>Date this site was last updated on</td>
</tr>
<tr>
<td>bank_identification_number</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters-3'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>financial_institution_ids</li>
<li>bank_identification_numbers</li>
<li>created_on_min / created_on_max</li>
<li>last_updated_on_min / last_updated_on_max</li>
</ul>
<h2 id='create-bin'>Create bin</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">bin</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createBin</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">financial_institution_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1313848303</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">bank_identification_number</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">49564874</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">custom_data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">uxJMLZvfpbNl</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">xgJ*(Xe!9A=8ns.#gE].t!&lt;</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">OnPAiCcflTZU</span><span class="dl">"</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">mrYMycJpRPWP</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"financial_institution_id"</span><span class="p">,</span> <span class="m">1313848303</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"bank_identification_number"</span><span class="p">,</span> <span class="s">"49564874"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Bin</span><span class="p">&gt;</span> <span class="n">bin</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">CreateBinAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"financial_institution_id"</span><span class="o">,</span> <span class="mi">1313848303</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"bank_identification_number"</span><span class="o">,</span> <span class="s">"49564874"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">bin</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/cardsavr_bins"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">financial_institution_id</span><span class="se">\"</span><span class="s2">:1313848303,</span><span class="se">\"</span><span class="s2">bank_identification_number</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">49564874</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">custom_data</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">uxJMLZvfpbNl</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">xgJ*(Xe!9A=8ns.#gE].t!&lt;</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">OnPAiCcflTZU</span><span class="se">\"</span><span class="s2">:28,</span><span class="se">\"</span><span class="s2">mrYMycJpRPWP</span><span class="se">\"</span><span class="s2">:true}}"</span>
<span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_bins/
</code></pre></div><h3 id='path-10'>Path</h3>
<p>POST /cardsavr_bins</p>
<h3 id='description-10'>Description</h3>
<p>Create a bin and return the created object.</p>
<h3 id='body-parameters-5'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>financial_institution_id</td>
<td>number</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>bank_identification_number</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>custom_data</td>
<td>object</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardsavr_bin">bin response attributes</a>.</p>
<h2 id='update-bin'>Update bin</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">bin</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">updateBin</span><span class="p">(</span><span class="mi">1</span><span class="p">,{</span>
  <span class="dl">"</span><span class="s2">financial_institution_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1012875437</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">custom_data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">sFojcbYWluaE</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">cc#QW</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">YUVphQDThmSC</span><span class="dl">"</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">qodAAyVdXTUC</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"financial_institution_id"</span><span class="p">,</span> <span class="m">1012875437</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Bin</span><span class="p">&gt;</span> <span class="n">bin</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateBinAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"financial_institution_id"</span><span class="o">,</span> <span class="mi">1012875437</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">bin</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/cardsavr_bins"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">financial_institution_id</span><span class="se">\"</span><span class="s2">:1012875437,</span><span class="se">\"</span><span class="s2">custom_data</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">sFojcbYWluaE</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">cc#QW</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">YUVphQDThmSC</span><span class="se">\"</span><span class="s2">:21,</span><span class="se">\"</span><span class="s2">qodAAyVdXTUC</span><span class="se">\"</span><span class="s2">:false}}"</span>
<span class="nt">-X</span> PUT <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_bins/500982004
</code></pre></div><h3 id='path-11'>Path</h3>
<p>PUT /cardsavr_bins OR /cardsavr_bins/{id}</p>
<h3 id='description-11'>Description</h3>
<p>Update a bin and return the updated object.  An id is required on every update request.</p>
<h3 id='body-parameters-6'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>financial_institution_id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>custom_data</td>
<td>object</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardsavr_bin">bin response parameters</a>.</p>
<h2 id='delete-bin'>Delete bin</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_bins/500982004
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">deleteBin</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Bin</span><span class="p">&gt;</span> <span class="n">bin</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">DeleteBinAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">bin</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/cardsavr_bins"</span><span class="o">,</span> <span class="n">undefined</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><h3 id='path-12'>Path</h3>
<p>DELETE /cardsavr_bins/{id}</p>
<h3 id='description-12'>Description</h3>
<p>Delete a bin and purge its <a href="#cascading-delete">related items</a>.  An id is required on every delete request.</p>

<p>See <a href="#response-cardsavr_bin">bin response parameters</a>.</p>
<h1 id='cards'>Cards</h1>
<p>A card object contains information about a payment card for a specific cardholder. Card objects are used to populate payment information on merchant sites.</p>
<h2 id='get-card'>Get card</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_cards/1677279224
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">cards</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getCards</span><span class="p">(</span><span class="mi">1677279224</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Cards</span><span class="p">&gt;</span> <span class="n">cards</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetCardsAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">cards</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/cardsavr_cards"</span><span class="o">,</span> <span class="mi">1677279224</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1677279224</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiration_month"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiration_year"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name_on_card"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe C Smith"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1999-12-28T09:18:20.023Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1992-01-25T17:35:09.215Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cardholder"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1319196910</span><span class="p">,</span><span class="w">
    </span><span class="nl">"financial_institution_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">106554230</span><span class="p">,</span><span class="w">
    </span><span class="nl">"agent_session_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yBJuINBfaKuxIFRcNIWIgQtR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ephemeral"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ST"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iKojMCNBdWiocMTPmA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guGqiBykyCDP@vJpsGT.MBm"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"meta_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bppFDDrLPupdjZrVBYt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cardholder_safe_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pEXrlrN6o/4T5NQcNGn1etDOFy9XC4yXw+IzHtHbnyY="</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"OMMwbPBuYEoQ"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6~32pR&amp;^e4KlO6j=q=k^V^Ii6-1sY"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"YAnlQnVFoFLt"</span><span class="p">:</span><span class="w"> </span><span class="mi">39</span><span class="p">,</span><span class="w">
      </span><span class="nl">"VEmenrIlvtuI"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1998-03-04T07:26:34.848Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1993-12-16T22:51:26.104Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cardsavr_bin"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">86744065</span><span class="p">,</span><span class="w">
    </span><span class="nl">"financial_institution_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1284511209</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"tMzUhNxlPiux"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2PEDn4Z2]e96^C~t"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"uuLeuVucHgBW"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"EURpZocfTCmE"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1989-07-23T23:55:16.805Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1986-06-06T04:22:34.870Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"address_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">829075875</span><span class="p">,</span><span class="w">
  </span><span class="nl">"par"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yfGVlTMhtsoEtltPskxHyzZlaFphx"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-13'>Path</h3>
<p>GET /cardsavr_cards <strong>(batch)</strong> or GET /cardsavr_cards/:id <strong>(singular)</strong></p>
<h3 id='description-13'>Description</h3>
<p>Returns the card specified by the provided ID</p>
<h4 id='batch-get-requests-4'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable cards, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/cardsavr_cards?ids=1,2</code></p>
<h4 id='singular-get-requests-4'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the card matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/cardsavr_cards/1677279224</code></p>
<h3 id='response-attributes-4'><a name="response-cardsavr_card"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>bin_id</td>
<td>number (fk)</td>
<td>ID of BIN associated with this card.</td>
</tr>
<tr>
<td>expiration_month</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>expiration_year</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>name_on_card</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>created_on</td>
<td>date</td>
<td>Date this site was created on</td>
</tr>
<tr>
<td>last_updated_on</td>
<td>date</td>
<td>Date this site was last updated on</td>
</tr>
<tr>
<td>cardholder_id</td>
<td>number (fk)</td>
<td>ID of cardholder associated with this card.</td>
</tr>
<tr>
<td>address_id</td>
<td>number</td>
<td>ID of address associated with this card.</td>
</tr>
<tr>
<td>par</td>
<td>string</td>
<td>Unique Personal Account Reference number for this card, to be used for card lookup. Generated automatically from PAN, expiration date, and username if using the SDK.</td>
</tr>
</tbody></table>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters-4'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>cardholder_ids</li>
<li>address_ids</li>
<li>bin_ids</li>
<li>pars</li>
<li>created_on_min / created_on_max</li>
<li>last_updated_on_min / last_updated_on_max</li>
</ul>
<h2 id='create-card'>Create card</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">card</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createCard</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">cardholder_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2069430851</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">address_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">829075875</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">bin_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">975896805</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">par</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">yfGVlTMhtsoEtltPskxHyzZlaFphx</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">pan</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">4111111111111111</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">cvv</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">111</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">expiration_month</span><span class="dl">"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">expiration_year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">name_on_card</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Joe C Smith</span><span class="dl">"</span>
<span class="p">},</span> <span class="nx">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"cardholder_id"</span><span class="p">,</span> <span class="m">2069430851</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"address_id"</span><span class="p">,</span> <span class="m">829075875</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"bin_id"</span><span class="p">,</span> <span class="m">975896805</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"par"</span><span class="p">,</span> <span class="s">"yfGVlTMhtsoEtltPskxHyzZlaFphx"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"pan"</span><span class="p">,</span> <span class="s">"4111111111111111"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"cvv"</span><span class="p">,</span> <span class="s">"111"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"expiration_month"</span><span class="p">,</span> <span class="m">12</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"expiration_year"</span><span class="p">,</span> <span class="m">24</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"name_on_card"</span><span class="p">,</span> <span class="s">"Joe C Smith"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Card</span><span class="p">&gt;</span> <span class="n">card</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">CreateCardAsync</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"cardholder_id"</span><span class="o">,</span> <span class="mi">2069430851</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"address_id"</span><span class="o">,</span> <span class="mi">829075875</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"bin_id"</span><span class="o">,</span> <span class="mi">975896805</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"par"</span><span class="o">,</span> <span class="s">"yfGVlTMhtsoEtltPskxHyzZlaFphx"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"pan"</span><span class="o">,</span> <span class="s">"4111111111111111"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"cvv"</span><span class="o">,</span> <span class="s">"111"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"expiration_month"</span><span class="o">,</span> <span class="mi">12</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"expiration_year"</span><span class="o">,</span> <span class="mi">24</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"name_on_card"</span><span class="o">,</span> <span class="s">"Joe C Smith"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">card</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/cardsavr_cards"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">cardholder_id</span><span class="se">\"</span><span class="s2">:2069430851,</span><span class="se">\"</span><span class="s2">address_id</span><span class="se">\"</span><span class="s2">:829075875,</span><span class="se">\"</span><span class="s2">bin_id</span><span class="se">\"</span><span class="s2">:975896805,</span><span class="se">\"</span><span class="s2">par</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">yfGVlTMhtsoEtltPskxHyzZlaFphx</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">pan</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">4111111111111111</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">cvv</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">111</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">expiration_month</span><span class="se">\"</span><span class="s2">:12,</span><span class="se">\"</span><span class="s2">expiration_year</span><span class="se">\"</span><span class="s2">:24,</span><span class="se">\"</span><span class="s2">name_on_card</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Joe C Smith</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-cardholder-safe-key: CARDHOLDER_SAFE_KEY"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_cards/
</code></pre></div><h3 id='path-14'>Path</h3>
<p>POST /cardsavr_cards</p>
<h3 id='description-14'>Description</h3>
<p>Create a card and return the created object.</p>
<h3 id='body-parameters-7'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cardholder_id</td>
<td>number</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>address_id</td>
<td>number</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>bin_id</td>
<td>number</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>par</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>pan</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>cvv</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>expiration_month</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>expiration_year</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>name_on_card</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardsavr_card">card response attributes</a>.</p>

<aside class="notice">Update calls to /cardsavr_cards require the cardholder's personal cardholder_safe_key header to encrypt and save the pan and cvv when Strivve does not manage keys for a customer (this is an environment setting). The safe keys are also not required if updating non-safe user properties.</aside>
<h2 id='upsert-card'>Upsert card</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">card</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">updateCard</span><span class="p">(</span><span class="mi">1</span><span class="p">,{</span>
  <span class="dl">"</span><span class="s2">bin_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1225420508</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">cvv</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">111</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">expiration_month</span><span class="dl">"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">expiration_year</span><span class="dl">"</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">name_on_card</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Joe C Smith</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">pan</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">4111111111111111</span><span class="dl">"</span>
<span class="p">},</span> <span class="nx">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"bin_id"</span><span class="p">,</span> <span class="m">1225420508</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"cvv"</span><span class="p">,</span> <span class="s">"111"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"expiration_month"</span><span class="p">,</span> <span class="m">12</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"expiration_year"</span><span class="p">,</span> <span class="m">24</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"name_on_card"</span><span class="p">,</span> <span class="s">"Joe C Smith"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"pan"</span><span class="p">,</span> <span class="s">"4111111111111111"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Card</span><span class="p">&gt;</span> <span class="n">card</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateCardAsync</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"bin_id"</span><span class="o">,</span> <span class="mi">1225420508</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"cvv"</span><span class="o">,</span> <span class="s">"111"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"expiration_month"</span><span class="o">,</span> <span class="mi">12</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"expiration_year"</span><span class="o">,</span> <span class="mi">24</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"name_on_card"</span><span class="o">,</span> <span class="s">"Joe C Smith"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"pan"</span><span class="o">,</span> <span class="s">"4111111111111111"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">card</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/cardsavr_cards"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">bin_id</span><span class="se">\"</span><span class="s2">:1225420508,</span><span class="se">\"</span><span class="s2">cvv</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">111</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">expiration_month</span><span class="se">\"</span><span class="s2">:12,</span><span class="se">\"</span><span class="s2">expiration_year</span><span class="se">\"</span><span class="s2">:24,</span><span class="se">\"</span><span class="s2">name_on_card</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Joe C Smith</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">pan</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">4111111111111111</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> PUT <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_cards/1677279224
</code></pre></div><h3 id='path-15'>Path</h3>
<p>PUT /cardsavr_cards OR /cardsavr_cards/{id}</p>
<h3 id='description-15'>Description</h3>
<p>Upsert can be used to either update a card, create a new card, or return an existing card.  Either an id or PAR is required for upsert. The id (in path or body), along with an updated body, can be used to update an existing card; the PAR (in body) can likewise be used to update a card, and can also be used to create a new card, if the PAR does not match any existing cards. If the id or PAR provided corresponds to a pre-existing card and no updated information has been included in the body, the existing card will be returned.</p>
<h3 id='body-parameters-8'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bin_id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>cvv</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>expiration_month</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>expiration_year</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>name_on_card</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardsavr_card">card response parameters</a>.</p>
<h2 id='delete-card'>Delete card</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_cards/1677279224
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">deleteCard</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Card</span><span class="p">&gt;</span> <span class="n">card</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">DeleteCardAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">card</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/cardsavr_cards"</span><span class="o">,</span> <span class="n">undefined</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><h3 id='path-16'>Path</h3>
<p>DELETE /cardsavr_cards/{id}</p>
<h3 id='description-16'>Description</h3>
<p>Delete a card and purge its <a href="#cascading-delete">related items</a>.  An id is required on every delete request.</p>

<p>See <a href="#response-cardsavr_card">card response parameters</a>.</p>
<h1 id='cardholders'>Cardholders</h1>
<p>Cardholders are the end-users of the CardSavr API, who can have their their payment information updated on merchant site(s). Cardholders can be linked to cards, accounts, and addresses.</p>
<h2 id='get-cardholder'>Get cardholder</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardholders/1807843104
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">cardholders</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getCardholders</span><span class="p">(</span><span class="mi">1807843104</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Cardholders</span><span class="p">&gt;</span> <span class="n">cardholders</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetCardholdersAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">cardholders</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/cardholders"</span><span class="o">,</span> <span class="mi">1807843104</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1807843104</span><span class="p">,</span><span class="w">
  </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_email@strivve.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"meta_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MB9810411"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"custom_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"AzRhERIXkSgw"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XR6fL=ah9sNuO9)qKx$"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dGnbGElGeJQT"</span><span class="p">:</span><span class="w"> </span><span class="mi">82</span><span class="p">,</span><span class="w">
    </span><span class="nl">"oNLyOjoqKuCk"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2001-04-27T17:57:41.975Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-01-15T20:10:33.675Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"financial_institution"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">170301579</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ArTjQFqRyEfsixylilTTMqoBMnlReUSBOcnMmDzpfVWwTdtkgELUEPdnAwUgwuA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LeslFXbwYnthkTqQpG"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lookup_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fFbYyLTPhoJCfIhmeTJcXTcxPSRhrzhWPQYYdbbsUgxAiOVMqdsYhoSZcveJzgp"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"alternate_lookup_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iQGrhYYhJjwnnCOQxmHyTJYjGVORpzgNWTvFSljnolWyqgNpjBKhpSMqLCkynNP"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"vKZBJsYGahrU"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eMVz&amp;gai^o]xS!e3P.ij&gt;Tms5u5#"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"SFfxHWlRxlJN"</span><span class="p">:</span><span class="w"> </span><span class="mi">29</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mSbvnaxqExBE"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-01-18T06:22:56.473Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1971-07-21T02:51:16.760Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jBXSRFoswCkGzhzZasULSFVKCyj"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-17'>Path</h3>
<p>GET /cardholders <strong>(batch)</strong> or GET /cardholders/:id <strong>(singular)</strong></p>
<h3 id='description-17'>Description</h3>
<p>Returns the cardholder specified by the provided ID</p>
<h4 id='batch-get-requests-5'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable cardholders, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/cardholders?ids=1,2</code></p>
<h4 id='singular-get-requests-5'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the cardholder matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/cardholders/1807843104</code></p>
<h3 id='response-attributes-5'><a name="response-cardholder"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>financial_institution_id</td>
<td>number (fk)</td>
<td></td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>meta_key</td>
<td>string</td>
<td>Key used for billing record identification; automatically generated during card creation.</td>
</tr>
<tr>
<td>custom_data</td>
<td>object</td>
<td>Additional data that can be added to the cardholder if needed.</td>
</tr>
<tr>
<td>created_on</td>
<td>date</td>
<td>Date this site was created on</td>
</tr>
<tr>
<td>last_updated_on</td>
<td>date</td>
<td>Date this site was last updated on</td>
</tr>
<tr>
<td>cuid</td>
<td>string</td>
<td>Unique ID for cardholder--can be email address, phone number, etc.</td>
</tr>
</tbody></table>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters-5'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>financial_institution_ids</li>
<li>cuid</li>
<li>first_name</li>
<li>last_name</li>
<li>email</li>
<li>meta_key</li>
<li>created_on_min / created_on_max</li>
<li>last_updated_on_min / last_updated_on_max</li>
</ul>
<h2 id='create-cardholder'>Create cardholder</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">cardholder</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createCardholder</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">cuid</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">jBXSRFoswCkGzhzZasULSFVKCyj</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">first_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Joe</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">last_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Smith</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test_email@strivve.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">meta_key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">MB9810411</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">custom_data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">AzRhERIXkSgw</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">XR6fL=ah9sNuO9)qKx$</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">dGnbGElGeJQT</span><span class="dl">"</span><span class="p">:</span> <span class="mi">82</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">oNLyOjoqKuCk</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"cuid"</span><span class="p">,</span> <span class="s">"jBXSRFoswCkGzhzZasULSFVKCyj"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"first_name"</span><span class="p">,</span> <span class="s">"Joe"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"last_name"</span><span class="p">,</span> <span class="s">"Smith"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"email"</span><span class="p">,</span> <span class="s">"test_email@strivve.com"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"meta_key"</span><span class="p">,</span> <span class="s">"MB9810411"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Cardholder</span><span class="p">&gt;</span> <span class="n">cardholder</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">CreateCardholderAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"cuid"</span><span class="o">,</span> <span class="s">"jBXSRFoswCkGzhzZasULSFVKCyj"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"Joe"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"Smith"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"email"</span><span class="o">,</span> <span class="s">"test_email@strivve.com"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"meta_key"</span><span class="o">,</span> <span class="s">"MB9810411"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">cardholder</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/cardholders"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">cuid</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">jBXSRFoswCkGzhzZasULSFVKCyj</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">first_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Joe</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">last_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Smith</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">test_email@strivve.com</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">meta_key</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">MB9810411</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">custom_data</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">AzRhERIXkSgw</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">XR6fL=ah9sNuO9)qKx</span><span class="nv">$\</span><span class="s2">"</span>,<span class="se">\"</span>dGnbGElGeJQT<span class="se">\"</span>:82,<span class="se">\"</span>oNLyOjoqKuCk<span class="se">\"</span>:true<span class="o">}}</span><span class="s2">"
-X POST -H "</span>Content-Type: application/json<span class="s2">"
-H "</span>x-cardsavr-trace:<span class="o">{</span><span class="se">\"</span>key<span class="se">\"</span>: <span class="se">\"</span>my_trace<span class="se">\"</span><span class="o">}</span><span class="s2">" -b ~/_cookies -c ~/_cookies
https://api.INSTANCE.cardsavr.io/cardholders/
</span></code></pre></div><h3 id='path-18'>Path</h3>
<p>POST /cardholders</p>
<h3 id='description-18'>Description</h3>
<p>Create a cardholder and return the created object.</p>
<h3 id='body-parameters-9'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cuid</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>meta_key</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>custom_data</td>
<td>object</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardholder">cardholder response attributes</a>.</p>
<h2 id='upsert-cardholder'>Upsert cardholder</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">cardholder</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">updateCardholder</span><span class="p">(</span><span class="mi">1</span><span class="p">,{</span>
  <span class="dl">"</span><span class="s2">first_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Joe</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">last_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Smith</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test_email@strivve.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">meta_key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">MB9810411</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">custom_data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">sWjqRmYGQWnA</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{&gt;L$+mL(oW2)LA].</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">SoreCWyXFonk</span><span class="dl">"</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">ljOfNwkZxprw</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"first_name"</span><span class="p">,</span> <span class="s">"Joe"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"last_name"</span><span class="p">,</span> <span class="s">"Smith"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"email"</span><span class="p">,</span> <span class="s">"test_email@strivve.com"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"meta_key"</span><span class="p">,</span> <span class="s">"MB9810411"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Cardholder</span><span class="p">&gt;</span> <span class="n">cardholder</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateCardholderAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"Joe"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"Smith"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"email"</span><span class="o">,</span> <span class="s">"test_email@strivve.com"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"meta_key"</span><span class="o">,</span> <span class="s">"MB9810411"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">cardholder</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/cardholders"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">first_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Joe</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">last_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Smith</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">test_email@strivve.com</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">meta_key</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">MB9810411</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">custom_data</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">sWjqRmYGQWnA</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">{&gt;L</span><span class="nv">$+</span><span class="s2">mL(oW2)LA].</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">SoreCWyXFonk</span><span class="se">\"</span><span class="s2">:60,</span><span class="se">\"</span><span class="s2">ljOfNwkZxprw</span><span class="se">\"</span><span class="s2">:false}}"</span>
<span class="nt">-X</span> PUT <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardholders/1807843104
</code></pre></div><h3 id='path-19'>Path</h3>
<p>PUT /cardholders OR /cardholders/{id}</p>
<h3 id='description-19'>Description</h3>
<p>Upsert can be used to either update a cardholder, create a new cardholder, or return an existing cardholder.  Either an id or cuid is required for upsert. The id (in path or body), along with an updated body, can be used to update an existing cardholder; the cuid (in body) can likewise be used to update a cardholder, and can also be used to create a new cardholder, if the cuid does not match any existing cardholders. If the id or cuid provided corresponds to a pre-existing cardholder and no updated information has been included in the body, the existing cardholder will be returned.</p>
<h3 id='body-parameters-10'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>meta_key</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>custom_data</td>
<td>object</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardholder">cardholder response parameters</a>.</p>
<h2 id='delete-cardholder'>Delete cardholder</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardholders/1807843104
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">deleteCardholder</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Cardholder</span><span class="p">&gt;</span> <span class="n">cardholder</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">DeleteCardholderAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">cardholder</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/cardholders"</span><span class="o">,</span> <span class="n">undefined</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><h3 id='path-20'>Path</h3>
<p>DELETE /cardholders/{id}</p>
<h3 id='description-20'>Description</h3>
<p>Delete a cardholder and purge its <a href="#cascading-delete">related items</a>.  An id is required on every delete request.</p>

<p>See <a href="#response-cardholder">cardholder response parameters</a>.</p>
<h1 id='users'>Users</h1>
<p>Users are internal entities, such as agents or admins, that can perform such functions as creating and deleting cardholders, fetching merchant sites, creating jobs, etc.</p>
<h2 id='get-user'>Get user</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_users/239458209
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">users</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getUsers</span><span class="p">(</span><span class="mi">239458209</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Users</span><span class="p">&gt;</span> <span class="n">users</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetUsersAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">users</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/cardsavr_users"</span><span class="o">,</span> <span class="mi">239458209</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">239458209</span><span class="p">,</span><span class="w">
  </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_login_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1999-04-15T10:17:35.138Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"is_locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password_lifetime"</span><span class="p">:</span><span class="w"> </span><span class="mi">326</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_email@strivve.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"is_password_update_required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cardholder_agent"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"next_rotation_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1982-08-25T16:37:44.010Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-10T08:18:51.293Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1996-09-12T07:00:59.314Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jsmith123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"financial_institution"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">253674729</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jasIpmDgHuMBiolKmLltSZedcAGUQczQWgGpjlTGfVCvIBfFuDxrYReTcRlCMap"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VqXfDcDtMydeX"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lookup_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KezOGMVidMyGbcIwwAoPvAMPeYUCXfmwlNpxZksGaeSgZqbcHTrenoPIkDGvxTa"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"alternate_lookup_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QxuOAKlEKhAILVAAwWKuXAQpUKsPmMeTRVLKONJdXJEieieHlYGPrvZnpcHCfQR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ETNWUgRpEuqg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+0s0GHV"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"jNcYYbzFwBOR"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
      </span><span class="nl">"zXrqNmPtdOEU"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-02T05:21:04.732Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1991-10-21T12:12:19.782Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-21'>Path</h3>
<p>GET /cardsavr_users <strong>(batch)</strong> or GET /cardsavr_users/:id <strong>(singular)</strong></p>
<h3 id='description-21'>Description</h3>
<p>Returns the user specified by the provided ID</p>
<h4 id='batch-get-requests-6'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable users, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/cardsavr_users?ids=1,2</code></p>
<h4 id='singular-get-requests-6'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the user matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/cardsavr_users/239458209</code></p>
<h3 id='response-attributes-6'><a name="response-cardsavr_user"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>financial_institution_id</td>
<td>number (fk)</td>
<td></td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>last_login_time</td>
<td>date</td>
<td></td>
</tr>
<tr>
<td>is_locked</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>password_lifetime</td>
<td>number</td>
<td>Length of time that password will remain valid.</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>is_password_update_required</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>role</td>
<td>string</td>
<td>User role (cardholder_agent or customer_agent) determines the user&#39;s ability to access certain endpoints and perform certain operations within the CardSavr API.</td>
</tr>
</tbody></table>

<p>cardholder_agents can create cardholders, create cards addresses for those cardholders, create accounts for those cardholders, and post jobs for those cardholders.
customer_agents can peform all actions on cardholders/accounts/, but are limited to acting on cardholders/jobs/accounts/cards within their FI (unless they are assigned to the admin FI)
next_rotation_on | date | Date of next password rotation for this user.
created_on | date | Date this site was created on
last_updated_on | date | Date this site was last updated on
username | string | </p>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters-6'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>financial_institution_ids</li>
<li>usernames</li>
<li>username</li>
<li>first_name</li>
<li>last_name</li>
<li>last_login_time_min / last_login_time_max</li>
<li>is_locked</li>
<li>email</li>
<li>is_password_update_required</li>
<li>role</li>
<li>roles_include / roles_exclude</li>
<li>created_on_min / created_on_max</li>
<li>last_updated_on_min / last_updated_on_max</li>
</ul>
<h2 id='create-user'>Create user</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createUser</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">financial_institution_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">439012728</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">jsmith123</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI=</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">first_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Joe</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">last_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Smith</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">password_lifetime</span><span class="dl">"</span><span class="p">:</span> <span class="mi">326</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test_email@strivve.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">is_password_update_required</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">role</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">cardholder_agent</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">next_rotation_on</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1982-08-25T16:37:44.010Z</span><span class="dl">"</span>
<span class="p">},</span> <span class="nx">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"financial_institution_id"</span><span class="p">,</span> <span class="m">439012728</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"username"</span><span class="p">,</span> <span class="s">"jsmith123"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"password"</span><span class="p">,</span> <span class="s">"BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI="</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"first_name"</span><span class="p">,</span> <span class="s">"Joe"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"last_name"</span><span class="p">,</span> <span class="s">"Smith"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"password_lifetime"</span><span class="p">,</span> <span class="m">326</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"email"</span><span class="p">,</span> <span class="s">"test_email@strivve.com"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"is_password_update_required"</span><span class="p">,</span> <span class="k">true</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"role"</span><span class="p">,</span> <span class="s">"cardholder_agent"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"next_rotation_on"</span><span class="p">,</span> <span class="s">"1982-08-25T16:37:44.010Z"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">User</span><span class="p">&gt;</span> <span class="n">user</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">CreateUserAsync</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"financial_institution_id"</span><span class="o">,</span> <span class="mi">439012728</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="s">"jsmith123"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="s">"BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI="</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"Joe"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"Smith"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"password_lifetime"</span><span class="o">,</span> <span class="mi">326</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"email"</span><span class="o">,</span> <span class="s">"test_email@strivve.com"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"is_password_update_required"</span><span class="o">,</span> <span class="kc">true</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"role"</span><span class="o">,</span> <span class="s">"cardholder_agent"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"next_rotation_on"</span><span class="o">,</span> <span class="s">"1982-08-25T16:37:44.010Z"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/cardsavr_users"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">financial_institution_id</span><span class="se">\"</span><span class="s2">:439012728,</span><span class="se">\"</span><span class="s2">username</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">jsmith123</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI=</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">first_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Joe</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">last_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Smith</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">password_lifetime</span><span class="se">\"</span><span class="s2">:326,</span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">test_email@strivve.com</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">is_password_update_required</span><span class="se">\"</span><span class="s2">:true,</span><span class="se">\"</span><span class="s2">role</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">cardholder_agent</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">next_rotation_on</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1982-08-25T16:37:44.010Z</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_users/
</code></pre></div><h3 id='path-22'>Path</h3>
<p>POST /cardsavr_users</p>
<h3 id='description-22'>Description</h3>
<p>Create a user and return the created object.</p>
<h3 id='body-parameters-11'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>financial_institution_id</td>
<td>number</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>username</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>password_lifetime</td>
<td>number</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>is_password_update_required</td>
<td>boolean</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>role</td>
<td><a href="#post-cardsavr_user-1">string enum</a>*</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>next_rotation_on</td>
<td>date</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardsavr_user">user response attributes</a>.</p>
<h4 id='string-enum'><a name="post-cardsavr_user-1"></a>string enum*</h4>
<ul>
<li>admin</li>
<li>cardholder_agent</li>
<li>customer_agent</li>
<li>swch_agent</li>
</ul>
<h2 id='update-user'>Update user</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">updateUser</span><span class="p">(</span><span class="mi">1</span><span class="p">,{</span>
  <span class="dl">"</span><span class="s2">financial_institution_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">832074497</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">first_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Joe</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">last_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Smith</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">password_lifetime</span><span class="dl">"</span><span class="p">:</span> <span class="mi">109</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test_email@strivve.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">is_password_update_required</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">role</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">cardholder_agent</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">next_rotation_on</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1983-07-30T16:50:00.751Z</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">jsmith123</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI=</span><span class="dl">"</span>
<span class="p">},</span> <span class="nx">NEW_CARDHODLER_SAFE_KEY</span><span class="p">,</span> <span class="nx">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"financial_institution_id"</span><span class="p">,</span> <span class="m">832074497</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"first_name"</span><span class="p">,</span> <span class="s">"Joe"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"last_name"</span><span class="p">,</span> <span class="s">"Smith"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"password_lifetime"</span><span class="p">,</span> <span class="m">109</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"email"</span><span class="p">,</span> <span class="s">"test_email@strivve.com"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"is_password_update_required"</span><span class="p">,</span> <span class="k">false</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"role"</span><span class="p">,</span> <span class="s">"cardholder_agent"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"next_rotation_on"</span><span class="p">,</span> <span class="s">"1983-07-30T16:50:00.751Z"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"username"</span><span class="p">,</span> <span class="s">"jsmith123"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"password"</span><span class="p">,</span> <span class="s">"BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI="</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">User</span><span class="p">&gt;</span> <span class="n">user</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateUserAsync</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">NEW_CARDHODLER_SAFE_KEY</span><span class="p">,</span> <span class="n">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"financial_institution_id"</span><span class="o">,</span> <span class="mi">832074497</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"Joe"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"Smith"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"password_lifetime"</span><span class="o">,</span> <span class="mi">109</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"email"</span><span class="o">,</span> <span class="s">"test_email@strivve.com"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"is_password_update_required"</span><span class="o">,</span> <span class="kc">false</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"role"</span><span class="o">,</span> <span class="s">"cardholder_agent"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"next_rotation_on"</span><span class="o">,</span> <span class="s">"1983-07-30T16:50:00.751Z"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="s">"jsmith123"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="s">"BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI="</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/cardsavr_users"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">financial_institution_id</span><span class="se">\"</span><span class="s2">:832074497,</span><span class="se">\"</span><span class="s2">first_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Joe</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">last_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Smith</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">password_lifetime</span><span class="se">\"</span><span class="s2">:109,</span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">test_email@strivve.com</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">is_password_update_required</span><span class="se">\"</span><span class="s2">:false,</span><span class="se">\"</span><span class="s2">role</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">cardholder_agent</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">next_rotation_on</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1983-07-30T16:50:00.751Z</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">username</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">jsmith123</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">BSN6W6IF72W6EVWwbwgqYIo51ad/ZCZ74vxa3rzyQqI=</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> PUT <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-new-cardholder-safe-key: NEW_CARDHODLER_SAFE_KEY"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_users/239458209
</code></pre></div><h3 id='path-23'>Path</h3>
<p>PUT /cardsavr_users OR /cardsavr_users/{id}</p>
<h3 id='description-23'>Description</h3>
<p>Update a user and return the updated object.  An id is required on every update request.</p>
<h3 id='body-parameters-12'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>financial_institution_id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>password_lifetime</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>is_password_update_required</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>role</td>
<td><a href="#post-cardsavr_user-1">string enum</a>*</td>
<td></td>
</tr>
<tr>
<td>next_rotation_on</td>
<td>date</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-cardsavr_user">user response parameters</a>.</p>
<h2 id='delete-user'>Delete user</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/cardsavr_users/239458209
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">deleteUser</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">User</span><span class="p">&gt;</span> <span class="n">user</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">DeleteUserAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/cardsavr_users"</span><span class="o">,</span> <span class="n">undefined</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><h3 id='path-24'>Path</h3>
<p>DELETE /cardsavr_users/{id}</p>
<h3 id='description-24'>Description</h3>
<p>Delete a user and purge its <a href="#cascading-delete">related items</a>.  An id is required on every delete request.</p>

<p>See <a href="#response-cardsavr_user">user response parameters</a>.</p>
<h1 id='financial-institutions'>Financial Institutions</h1>
<p>Financial Institution (FI) objects represent individual FIs and can be linked to users and cardholders. They also contain the configuration information that can be used to customize an FI&#39;s CardUpdatr instance, if one exists.</p>
<h2 id='get-financial-institution'>Get financial institution</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/financial_institutions/76885534
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">financialinstitutions</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getFinancialInstitutions</span><span class="p">(</span><span class="mi">76885534</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">FinancialInstitutions</span><span class="p">&gt;</span> <span class="n">financialinstitutions</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetFinancialInstitutionsAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">financialinstitutions</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/financial_institutions"</span><span class="o">,</span> <span class="mi">76885534</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">76885534</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iiHaYDyPDEFWEgipfBNCPeispiiXWIszgLnJCKHqMFMhLORToNbVXXzWlnTVaFp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OIRkptdEGreEScgtCAvXPlhyMMQNE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lookup_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CeeqFeqacnnaTeUaDWlOUjyGkPDVvHZHWsJaJRCXvIkySKsZkheOoDFTvTHWxkz"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alternate_lookup_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JImxFveLRxXmcLJtmBLaZTpxRZdnkzwRRUMWyDOXkPhhywmCHRsqqtMeHMMYXqo"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2007-09-13T09:29:05.246Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2010-11-14T03:18:52.412Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-25'>Path</h3>
<p>GET /financial_institutions <strong>(batch)</strong> or GET /financial_institutions/:id <strong>(singular)</strong></p>
<h3 id='description-25'>Description</h3>
<p>Returns the financial institution specified by the provided ID</p>
<h4 id='batch-get-requests-7'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable financial institutions, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/financial_institutions?ids=1,2</code></p>
<h4 id='singular-get-requests-7'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the financial institution matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/financial_institutions/76885534</code></p>
<h3 id='response-attributes-7'><a name="response-financial_institution"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>lookup_key</td>
<td>string</td>
<td>Unique key used to identify financial institution.</td>
</tr>
<tr>
<td>alternate_lookup_key</td>
<td>string</td>
<td>Alternate lookup key; can be used in case of FI name change that does not match original lookup_key, in order to maintain backwards compatibility.</td>
</tr>
<tr>
<td>created_on</td>
<td>date</td>
<td>Date this integrator was created on</td>
</tr>
<tr>
<td>last_updated_on</td>
<td>date</td>
<td>Date this integrator was last updated on</td>
</tr>
</tbody></table>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters-7'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>names</li>
<li>lookup_key</li>
<li>alternate_lookup_key</li>
<li>created_on_min / created_on_max</li>
<li>last_updated_on_min / last_updated_on_max</li>
</ul>
<h2 id='create-financial-institution'>Create financial institution</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">financialinstitution</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createFinancialInstitution</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">iiHaYDyPDEFWEgipfBNCPeispiiXWIszgLnJCKHqMFMhLORToNbVXXzWlnTVaFp</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">OIRkptdEGreEScgtCAvXPlhyMMQNE</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">lookup_key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">CeeqFeqacnnaTeUaDWlOUjyGkPDVvHZHWsJaJRCXvIkySKsZkheOoDFTvTHWxkz</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">alternate_lookup_key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">JImxFveLRxXmcLJtmBLaZTpxRZdnkzwRRUMWyDOXkPhhywmCHRsqqtMeHMMYXqo</span><span class="dl">"</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"name"</span><span class="p">,</span> <span class="s">"iiHaYDyPDEFWEgipfBNCPeispiiXWIszgLnJCKHqMFMhLORToNbVXXzWlnTVaFp"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"description"</span><span class="p">,</span> <span class="s">"OIRkptdEGreEScgtCAvXPlhyMMQNE"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"lookup_key"</span><span class="p">,</span> <span class="s">"CeeqFeqacnnaTeUaDWlOUjyGkPDVvHZHWsJaJRCXvIkySKsZkheOoDFTvTHWxkz"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"alternate_lookup_key"</span><span class="p">,</span> <span class="s">"JImxFveLRxXmcLJtmBLaZTpxRZdnkzwRRUMWyDOXkPhhywmCHRsqqtMeHMMYXqo"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">FinancialInstitution</span><span class="p">&gt;</span> <span class="n">financialinstitution</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">CreateFinancialInstitutionAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"iiHaYDyPDEFWEgipfBNCPeispiiXWIszgLnJCKHqMFMhLORToNbVXXzWlnTVaFp"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"description"</span><span class="o">,</span> <span class="s">"OIRkptdEGreEScgtCAvXPlhyMMQNE"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"lookup_key"</span><span class="o">,</span> <span class="s">"CeeqFeqacnnaTeUaDWlOUjyGkPDVvHZHWsJaJRCXvIkySKsZkheOoDFTvTHWxkz"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"alternate_lookup_key"</span><span class="o">,</span> <span class="s">"JImxFveLRxXmcLJtmBLaZTpxRZdnkzwRRUMWyDOXkPhhywmCHRsqqtMeHMMYXqo"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">financialinstitution</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/financial_institutions"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">iiHaYDyPDEFWEgipfBNCPeispiiXWIszgLnJCKHqMFMhLORToNbVXXzWlnTVaFp</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">description</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">OIRkptdEGreEScgtCAvXPlhyMMQNE</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">lookup_key</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">CeeqFeqacnnaTeUaDWlOUjyGkPDVvHZHWsJaJRCXvIkySKsZkheOoDFTvTHWxkz</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">alternate_lookup_key</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">JImxFveLRxXmcLJtmBLaZTpxRZdnkzwRRUMWyDOXkPhhywmCHRsqqtMeHMMYXqo</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/financial_institutions/
</code></pre></div><h3 id='path-26'>Path</h3>
<p>POST /financial_institutions</p>
<h3 id='description-26'>Description</h3>
<p>Create a financial institution and return the created object.</p>
<h3 id='body-parameters-13'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>lookup_key</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>alternate_lookup_key</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-financial_institution">financial institution response attributes</a>.</p>
<h2 id='update-financial-institution'>Update financial institution</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">financialinstitution</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">updateFinancialInstitution</span><span class="p">(</span><span class="mi">1</span><span class="p">,{</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">JOMttoYfNcXNzmwAxpdvTsxYApHQjZnBoBtKsoxDyXHOOQiGRnirstNVAfhkjZG</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ElwmxgNyQMyBpfkvBArQETYoVmAkJ</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">lookup_key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">IGYLtjXlHPZOoIHhjYYThQCaRdVoETbqrCZARxtBGoCmVUvgrhSoOTBqPROjIQI</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">alternate_lookup_key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">LHumVxEqdNKJxkBIfYsMKymKZTLvKBZENuAfVvIwPnwqOMZqkxmtrJiKvMMiUwc</span><span class="dl">"</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"name"</span><span class="p">,</span> <span class="s">"JOMttoYfNcXNzmwAxpdvTsxYApHQjZnBoBtKsoxDyXHOOQiGRnirstNVAfhkjZG"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"description"</span><span class="p">,</span> <span class="s">"ElwmxgNyQMyBpfkvBArQETYoVmAkJ"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"lookup_key"</span><span class="p">,</span> <span class="s">"IGYLtjXlHPZOoIHhjYYThQCaRdVoETbqrCZARxtBGoCmVUvgrhSoOTBqPROjIQI"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"alternate_lookup_key"</span><span class="p">,</span> <span class="s">"LHumVxEqdNKJxkBIfYsMKymKZTLvKBZENuAfVvIwPnwqOMZqkxmtrJiKvMMiUwc"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">FinancialInstitution</span><span class="p">&gt;</span> <span class="n">financialinstitution</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateFinancialInstitutionAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"JOMttoYfNcXNzmwAxpdvTsxYApHQjZnBoBtKsoxDyXHOOQiGRnirstNVAfhkjZG"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"description"</span><span class="o">,</span> <span class="s">"ElwmxgNyQMyBpfkvBArQETYoVmAkJ"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"lookup_key"</span><span class="o">,</span> <span class="s">"IGYLtjXlHPZOoIHhjYYThQCaRdVoETbqrCZARxtBGoCmVUvgrhSoOTBqPROjIQI"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"alternate_lookup_key"</span><span class="o">,</span> <span class="s">"LHumVxEqdNKJxkBIfYsMKymKZTLvKBZENuAfVvIwPnwqOMZqkxmtrJiKvMMiUwc"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">financialinstitution</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/financial_institutions"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">JOMttoYfNcXNzmwAxpdvTsxYApHQjZnBoBtKsoxDyXHOOQiGRnirstNVAfhkjZG</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">description</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">ElwmxgNyQMyBpfkvBArQETYoVmAkJ</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">lookup_key</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">IGYLtjXlHPZOoIHhjYYThQCaRdVoETbqrCZARxtBGoCmVUvgrhSoOTBqPROjIQI</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">alternate_lookup_key</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">LHumVxEqdNKJxkBIfYsMKymKZTLvKBZENuAfVvIwPnwqOMZqkxmtrJiKvMMiUwc</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> PUT <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/financial_institutions/76885534
</code></pre></div><h3 id='path-27'>Path</h3>
<p>PUT /financial_institutions OR /financial_institutions/{id}</p>
<h3 id='description-27'>Description</h3>
<p>Update a financial institution and return the updated object.  An id is required on every update request.</p>
<h3 id='body-parameters-14'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>lookup_key</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>alternate_lookup_key</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-financial_institution">financial institution response parameters</a>.</p>
<h2 id='delete-financial-institution'>Delete financial institution</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/financial_institutions/76885534
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">deleteFinancialInstitution</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">FinancialInstitution</span><span class="p">&gt;</span> <span class="n">financialinstitution</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">DeleteFinancialInstitutionAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">financialinstitution</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/financial_institutions"</span><span class="o">,</span> <span class="n">undefined</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><h3 id='path-28'>Path</h3>
<p>DELETE /financial_institutions/{id}</p>
<h3 id='description-28'>Description</h3>
<p>Delete a financial institution and purge its <a href="#cascading-delete">related items</a>.  An id is required on every delete request.</p>

<p>See <a href="#response-financial_institution">financial institution response parameters</a>.</p>
<h1 id='integrators'>Integrators</h1>
<p>Integrators are applications that integrate the CardSavr API, using their own unique integrator key. An integrator name and key are required for all calls to the CardSavr API. An integrator can be associated with multiple users.</p>
<h2 id='get-integrator'>Get integrator</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/integrators/1866850679
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">integrators</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getIntegrators</span><span class="p">(</span><span class="mi">1866850679</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Integrators</span><span class="p">&gt;</span> <span class="n">integrators</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetIntegratorsAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">integrators</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/integrators"</span><span class="o">,</span> <span class="mi">1866850679</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1866850679</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YAaqjZdnimwaXhomhEOaFSAxtapSTnXxMqYRhbnLzYfjGIhvY"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auYDBRn"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"current_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"miZQftpjYND8ICOn/1xHEO9sPIjdyCBtj1XdgWsAXPk="</span><span class="p">,</span><span class="w">
  </span><span class="nl">"key_lifetime"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
  </span><span class="nl">"next_rotation_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1980-09-07T03:09:15.650Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1998-06-20T15:04:24.184Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1997-08-17T06:14:55.864Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-29'>Path</h3>
<p>GET /integrators <strong>(batch)</strong> or GET /integrators/:id <strong>(singular)</strong></p>
<h3 id='description-29'>Description</h3>
<p>Returns the integrator specified by the provided ID</p>
<h4 id='batch-get-requests-8'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable integrators, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/integrators?ids=1,2</code></p>
<h4 id='singular-get-requests-8'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the integrator matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/integrators/1866850679</code></p>
<h3 id='response-attributes-8'><a name="response-integrator"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td>An integrator&#39;s unique identifier</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Name of integrator.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>current_key</td>
<td>string</td>
<td>Current key for this integrator.</td>
</tr>
<tr>
<td>key_lifetime</td>
<td>number</td>
<td>Sets the duration of validity for integrator key.</td>
</tr>
<tr>
<td>next_rotation_on</td>
<td>date</td>
<td>Date of next key rotation for this integrator.</td>
</tr>
<tr>
<td>created_on</td>
<td>date</td>
<td>Date this integrator was created on</td>
</tr>
<tr>
<td>last_updated_on</td>
<td>date</td>
<td>Date this integrator was last updated on</td>
</tr>
</tbody></table>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters-8'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>names</li>
<li>name</li>
<li>next_rotation_on_min / next_rotation_on_max</li>
<li>created_on_min / created_on_max</li>
<li>last_updated_on_min / last_updated_on_max</li>
</ul>
<h2 id='create-integrator'>Create integrator</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">integrator</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createIntegrator</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YAaqjZdnimwaXhomhEOaFSAxtapSTnXxMqYRhbnLzYfjGIhvY</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">auYDBRn</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">current_key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">miZQftpjYND8ICOn/1xHEO9sPIjdyCBtj1XdgWsAXPk=</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">key_lifetime</span><span class="dl">"</span><span class="p">:</span> <span class="mi">64</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">next_rotation_on</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1980-09-07T03:09:15.650Z</span><span class="dl">"</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"name"</span><span class="p">,</span> <span class="s">"YAaqjZdnimwaXhomhEOaFSAxtapSTnXxMqYRhbnLzYfjGIhvY"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"description"</span><span class="p">,</span> <span class="s">"auYDBRn"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"current_key"</span><span class="p">,</span> <span class="s">"miZQftpjYND8ICOn/1xHEO9sPIjdyCBtj1XdgWsAXPk="</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"key_lifetime"</span><span class="p">,</span> <span class="m">64</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"next_rotation_on"</span><span class="p">,</span> <span class="s">"1980-09-07T03:09:15.650Z"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Integrator</span><span class="p">&gt;</span> <span class="n">integrator</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">CreateIntegratorAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"YAaqjZdnimwaXhomhEOaFSAxtapSTnXxMqYRhbnLzYfjGIhvY"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"description"</span><span class="o">,</span> <span class="s">"auYDBRn"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"current_key"</span><span class="o">,</span> <span class="s">"miZQftpjYND8ICOn/1xHEO9sPIjdyCBtj1XdgWsAXPk="</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"key_lifetime"</span><span class="o">,</span> <span class="mi">64</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"next_rotation_on"</span><span class="o">,</span> <span class="s">"1980-09-07T03:09:15.650Z"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">integrator</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/integrators"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">YAaqjZdnimwaXhomhEOaFSAxtapSTnXxMqYRhbnLzYfjGIhvY</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">description</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">auYDBRn</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">current_key</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">miZQftpjYND8ICOn/1xHEO9sPIjdyCBtj1XdgWsAXPk=</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">key_lifetime</span><span class="se">\"</span><span class="s2">:64,</span><span class="se">\"</span><span class="s2">next_rotation_on</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1980-09-07T03:09:15.650Z</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/integrators/
</code></pre></div><h3 id='path-30'>Path</h3>
<p>POST /integrators</p>
<h3 id='description-30'>Description</h3>
<p>Create a integrator and return the created object.</p>
<h3 id='body-parameters-15'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>current_key</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>key_lifetime</td>
<td>number</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>next_rotation_on</td>
<td>date</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-integrator">integrator response attributes</a>.</p>
<h2 id='update-integrator'>Update integrator</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">integrator</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">updateIntegrator</span><span class="p">(</span><span class="mi">1</span><span class="p">,{</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">lRjyoQSPXiTSIDexIxoOZLnXcFTPPDdWvBEnKvZsIAYpqtcdv</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">omQPMSgOhvcyAIaeqsyMwNmZQwsIxR</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">current_key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">cSiXp5/bTblzwN9Z1P3RE8fr6wBTQ44CLL6hH5kMS/8=</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">key_lifetime</span><span class="dl">"</span><span class="p">:</span> <span class="mi">210</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">next_rotation_on</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1981-06-10T23:17:05.307Z</span><span class="dl">"</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"name"</span><span class="p">,</span> <span class="s">"lRjyoQSPXiTSIDexIxoOZLnXcFTPPDdWvBEnKvZsIAYpqtcdv"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"description"</span><span class="p">,</span> <span class="s">"omQPMSgOhvcyAIaeqsyMwNmZQwsIxR"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"current_key"</span><span class="p">,</span> <span class="s">"cSiXp5/bTblzwN9Z1P3RE8fr6wBTQ44CLL6hH5kMS/8="</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"key_lifetime"</span><span class="p">,</span> <span class="m">210</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"next_rotation_on"</span><span class="p">,</span> <span class="s">"1981-06-10T23:17:05.307Z"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Integrator</span><span class="p">&gt;</span> <span class="n">integrator</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateIntegratorAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"lRjyoQSPXiTSIDexIxoOZLnXcFTPPDdWvBEnKvZsIAYpqtcdv"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"description"</span><span class="o">,</span> <span class="s">"omQPMSgOhvcyAIaeqsyMwNmZQwsIxR"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"current_key"</span><span class="o">,</span> <span class="s">"cSiXp5/bTblzwN9Z1P3RE8fr6wBTQ44CLL6hH5kMS/8="</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"key_lifetime"</span><span class="o">,</span> <span class="mi">210</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"next_rotation_on"</span><span class="o">,</span> <span class="s">"1981-06-10T23:17:05.307Z"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">integrator</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/integrators"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">lRjyoQSPXiTSIDexIxoOZLnXcFTPPDdWvBEnKvZsIAYpqtcdv</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">description</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">omQPMSgOhvcyAIaeqsyMwNmZQwsIxR</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">current_key</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">cSiXp5/bTblzwN9Z1P3RE8fr6wBTQ44CLL6hH5kMS/8=</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">key_lifetime</span><span class="se">\"</span><span class="s2">:210,</span><span class="se">\"</span><span class="s2">next_rotation_on</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1981-06-10T23:17:05.307Z</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> PUT <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/integrators/1866850679
</code></pre></div><h3 id='path-31'>Path</h3>
<p>PUT /integrators OR /integrators/{id}</p>
<h3 id='description-31'>Description</h3>
<p>Update a integrator and return the updated object.  An id is required on every update request.</p>
<h3 id='body-parameters-16'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>current_key</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>key_lifetime</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>next_rotation_on</td>
<td>date</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-integrator">integrator response parameters</a>.</p>
<h2 id='delete-integrator'>Delete integrator</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/integrators/1866850679
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">deleteIntegrator</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Integrator</span><span class="p">&gt;</span> <span class="n">integrator</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">DeleteIntegratorAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">integrator</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/integrators"</span><span class="o">,</span> <span class="n">undefined</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><h3 id='path-32'>Path</h3>
<p>DELETE /integrators/{id}</p>
<h3 id='description-32'>Description</h3>
<p>Delete a integrator and purge its <a href="#cascading-delete">related items</a>.  An id is required on every delete request.</p>

<p>See <a href="#response-integrator">integrator response parameters</a>.</p>
<h1 id='merchant-sites'>Merchant sites</h1>
<p>A merchant site object contains information, such as images URLs and hostname, for a CardSavr-supported merchant site.</p>
<h2 id='get-merchant-site'>Get merchant site</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/merchant_sites/1773019627
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">merchantsites</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getMerchantSites</span><span class="p">(</span><span class="mi">1773019627</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">MerchantSites</span><span class="p">&gt;</span> <span class="n">merchantsites</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetMerchantSitesAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">merchantsites</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/merchant_sites"</span><span class="o">,</span> <span class="mi">1773019627</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1773019627</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DbxkFBcevWeElJ"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"drYhIDhUBVazYISXOatjTmf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"*6GRZ&amp;kB4WRFEYu"</span><span class="p">,</span><span class="w">
    </span><span class="mi">68</span><span class="p">,</span><span class="w">
    </span><span class="s2">")9+&lt;F}PYpolq7[G"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"required_form_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"card_data"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cvv"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_address"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postal_code"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d1t7g1oas7m24a.cloudfront.net/tiles/dollarshaveclub.com?width=128&amp;version=21f917315911eec1b1705bc7784ce861579cff2b"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">128</span><span class="p">,</span><span class="w">
      </span><span class="nl">"grayscale"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d1t7g1oas7m24a.cloudfront.net/tiles/dollarshaveclub.com?width=32&amp;version=21f917315911eec1b1705bc7784ce861579cff2b"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w">
      </span><span class="nl">"grayscale"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"account_identification"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"XRZXxlhiaAmg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"H"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sTeUhEKmiehY"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tJvJDZBmaZxB"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"mfa"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"credit_card_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.merchantsite.com/credit_card"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"forgot_password_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.merchantsite.com/forgot_password"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"login_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.merchantsite.com/login"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username_label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username/Email"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"password_label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mfa_label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Additional information required, this code may be sent to your phone or email address."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"additional_info_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auth_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Linking account."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-33'>Path</h3>
<p>GET /merchant_sites <strong>(batch)</strong> or GET /merchant_sites/:id <strong>(singular)</strong></p>
<h3 id='description-33'>Description</h3>
<p>Returns the merchant site specified by the provided ID</p>
<h4 id='batch-get-requests-9'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable merchant sites, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/merchant_sites?ids=1,2</code></p>
<h4 id='singular-get-requests-9'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the merchant site matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/merchant_sites/1773019627</code></p>
<h3 id='response-attributes-9'><a name="response-merchant_site"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>host</td>
<td>string</td>
<td>e.g. amazon.com</td>
</tr>
<tr>
<td>tags</td>
<td>array</td>
<td>Tags for use by front-end, such as development.</td>
</tr>
<tr>
<td>required_form_fields</td>
<td>array</td>
<td>Indicates the cardholder personal information fields that are required by this site.</td>
</tr>
<tr>
<td>images</td>
<td>array</td>
<td>URLs of the images for this merchant site.</td>
</tr>
<tr>
<td>account_identification</td>
<td>object</td>
<td>The identification credentials required to authenticate with merchant site (i.e. username/password or phone number/password)</td>
</tr>
<tr>
<td>mfa</td>
<td>boolean</td>
<td>Indicates if this site is MFA-enabled.</td>
</tr>
<tr>
<td>credit_card_page</td>
<td>string</td>
<td>Merchant&#39;s credit card entry page.</td>
</tr>
<tr>
<td>forgot_password_page</td>
<td>string</td>
<td>Merchant&#39;s forgotten password page.</td>
</tr>
<tr>
<td>login_page</td>
<td>string</td>
<td>URL of login page.</td>
</tr>
<tr>
<td>login</td>
<td>object</td>
<td></td>
</tr>
</tbody></table>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters-9'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>exclude_ids</li>
<li>top_ids</li>
<li>name_starts_with</li>
<li>hosts</li>
<li>host</li>
<li>exclude_hosts</li>
<li>top_hosts</li>
<li>host_starts_with</li>
<li>tags</li>
</ul>
<h1 id='notifications'>Notifications</h1>
<p>Notification objects define a set of actions to be triggered by certain CardSavr events, such as session completion.</p>
<h2 id='get-notification'>Get notification</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/notifications/1012632809
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">notifications</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getNotifications</span><span class="p">(</span><span class="mi">1012632809</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Notifications</span><span class="p">&gt;</span> <span class="n">notifications</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetNotificationsAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">notifications</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/notifications"</span><span class="o">,</span> <span class="mi">1012632809</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1012632809</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"srLMtLIIqWFbSwPrwRpVhHYjSptuJOEpyqrMYebIvOvzKdCCtCMkOGsCztChNwh"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webhook"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"merchant_site_updates_top"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cardholder"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"from_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CardUpdatr &lt;no-reply@cardupdatr.app&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"return_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no-reply@cardupdatr.app"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"send_email_time"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"interval_length"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"interval_type"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"html_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FCdLZrDCouVBGwdX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"text_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OVJYXmnIQ"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1973-04-18T08:19:47.114Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1996-11-02T15:22:14.144Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"financial_institution"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">569651897</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VzxESokwQxdziHoZqfuxFWSswyYCyJUmFPninAQnAhSyhaSRwDkaxJSqTWqTDKZ"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zUUfcEhlZyt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lookup_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eRiovWtaxvmmudyNGgdzgRRMujvcZzOXuDjyVrkgaCCGXGNDVZJYcqBMRzWEJnc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"alternate_lookup_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CTSUhToQxrZZjnGmIbYllkJqUCTkKLfvFerkVaktmrJeRtbAXNkUwtUvSoFPhSG"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"tePgRCFnzlgV"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ec^{+hIxy&lt;^N58oWE&gt;+tsR&amp;3$/wVPS("</span><span class="p">,</span><span class="w">
      </span><span class="nl">"qvFRadTVhbac"</span><span class="p">:</span><span class="w"> </span><span class="mi">56</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fvoMaKYDzpxR"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1984-01-09T14:20:32.216Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-01-17T09:33:23.314Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-34'>Path</h3>
<p>GET /notifications <strong>(batch)</strong> or GET /notifications/:id <strong>(singular)</strong></p>
<h3 id='description-34'>Description</h3>
<p>Returns the notification specified by the provided ID</p>
<h4 id='batch-get-requests-10'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable notifications, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/notifications?ids=1,2</code></p>
<h4 id='singular-get-requests-10'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the notification matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/notifications/1012632809</code></p>
<h3 id='response-attributes-10'><a name="response-notification"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Name of this notification.</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Notification type (e.g. webhook or email).</td>
</tr>
<tr>
<td>event</td>
<td>string</td>
<td>Event that will triger the notification (e.g. session complete).</td>
</tr>
<tr>
<td>config</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>html_template</td>
<td>string</td>
<td>Overrides the default CardUpdatr html email template (for email notifications).</td>
</tr>
<tr>
<td>text_template</td>
<td>string</td>
<td>Overrides the default CardUpdatr text email template (for email notifications).</td>
</tr>
<tr>
<td>created_on</td>
<td>date</td>
<td>Date this notification was created on</td>
</tr>
<tr>
<td>last_updated_on</td>
<td>date</td>
<td>Date this notification was last updated on</td>
</tr>
<tr>
<td>financial_institution_id</td>
<td>number (fk)</td>
<td>ID of the financial institution associated with this notification.</td>
</tr>
</tbody></table>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters-10'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>financial_institution_ids</li>
<li>names</li>
<li>type</li>
<li>events</li>
<li>event</li>
<li>created_on_min / created_on_max</li>
<li>last_updated_on_min / last_updated_on_max</li>
</ul>
<h2 id='create-notification'>Create notification</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">notification</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createNotification</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">financial_institution_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">327416653</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">srLMtLIIqWFbSwPrwRpVhHYjSptuJOEpyqrMYebIvOvzKdCCtCMkOGsCztChNwh</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">webhook</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">merchant_site_updates_top</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">config</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">recipient</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">cardholder</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">from_email</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">CardUpdatr &lt;no-reply@cardupdatr.app&gt;</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">return_path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">no-reply@cardupdatr.app</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">send_email_time</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">interval_length</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">interval_type</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">html_template</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">FCdLZrDCouVBGwdX</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">text_template</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">OVJYXmnIQ</span><span class="dl">"</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"financial_institution_id"</span><span class="p">,</span> <span class="m">327416653</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"name"</span><span class="p">,</span> <span class="s">"srLMtLIIqWFbSwPrwRpVhHYjSptuJOEpyqrMYebIvOvzKdCCtCMkOGsCztChNwh"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"type"</span><span class="p">,</span> <span class="s">"webhook"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"event"</span><span class="p">,</span> <span class="s">"merchant_site_updates_top"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"html_template"</span><span class="p">,</span> <span class="s">"FCdLZrDCouVBGwdX"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"text_template"</span><span class="p">,</span> <span class="s">"OVJYXmnIQ"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Notification</span><span class="p">&gt;</span> <span class="n">notification</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">CreateNotificationAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"financial_institution_id"</span><span class="o">,</span> <span class="mi">327416653</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"srLMtLIIqWFbSwPrwRpVhHYjSptuJOEpyqrMYebIvOvzKdCCtCMkOGsCztChNwh"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"type"</span><span class="o">,</span> <span class="s">"webhook"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"event"</span><span class="o">,</span> <span class="s">"merchant_site_updates_top"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"html_template"</span><span class="o">,</span> <span class="s">"FCdLZrDCouVBGwdX"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"text_template"</span><span class="o">,</span> <span class="s">"OVJYXmnIQ"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">notification</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/notifications"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">financial_institution_id</span><span class="se">\"</span><span class="s2">:327416653,</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">srLMtLIIqWFbSwPrwRpVhHYjSptuJOEpyqrMYebIvOvzKdCCtCMkOGsCztChNwh</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">webhook</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">event</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">merchant_site_updates_top</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">config</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">recipient</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">cardholder</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">url</span><span class="se">\"</span><span class="s2">:null,</span><span class="se">\"</span><span class="s2">from_email</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">CardUpdatr &lt;no-reply@cardupdatr.app&gt;</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">return_path</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">no-reply@cardupdatr.app</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">send_email_time</span><span class="se">\"</span><span class="s2">:null,</span><span class="se">\"</span><span class="s2">interval_length</span><span class="se">\"</span><span class="s2">:null,</span><span class="se">\"</span><span class="s2">interval_type</span><span class="se">\"</span><span class="s2">:null},</span><span class="se">\"</span><span class="s2">html_template</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">FCdLZrDCouVBGwdX</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">text_template</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">OVJYXmnIQ</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/notifications/
</code></pre></div><h3 id='path-35'>Path</h3>
<p>POST /notifications</p>
<h3 id='description-35'>Description</h3>
<p>Create a notification and return the created object.</p>
<h3 id='body-parameters-17'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>financial_institution_id</td>
<td>number</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td><a href="#post-notification-1">string enum</a>*</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>event</td>
<td><a href="#post-notification-2">string enum</a>**</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>config</td>
<td>object</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>html_template</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>text_template</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-notification">notification response attributes</a>.</p>
<h4 id='string-enum-2'><a name="post-notification-1"></a>string enum*</h4>
<ul>
<li>email</li>
<li>webhook</li>
</ul>
<h4 id='string-enum-3'><a name="post-notification-2"></a>string enum**</h4>
<ul>
<li>session_complete</li>
<li>webhook_error_summary</li>
<li>merchant_site_updates_top</li>
<li>merchant_site_updates_all</li>
</ul>
<h2 id='update-notification'>Update notification</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">notification</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">updateNotification</span><span class="p">(</span><span class="mi">1</span><span class="p">,{</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">IlFZEWIJfFIcUVpQpjSiQhKmAAiTcmnJiwuoYsxWvmqnsxFAfYDlErhvgieaLMr</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">session_complete</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">config</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">recipient</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">cardholder</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">from_email</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">CardUpdatr &lt;no-reply@cardupdatr.app&gt;</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">return_path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">no-reply@cardupdatr.app</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">send_email_time</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">interval_length</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">interval_type</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">html_template</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">vwpodcrviAjSFXGyFB</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">text_template</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">kGTfzAmEu</span><span class="dl">"</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"name"</span><span class="p">,</span> <span class="s">"IlFZEWIJfFIcUVpQpjSiQhKmAAiTcmnJiwuoYsxWvmqnsxFAfYDlErhvgieaLMr"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"type"</span><span class="p">,</span> <span class="s">"email"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"event"</span><span class="p">,</span> <span class="s">"session_complete"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"html_template"</span><span class="p">,</span> <span class="s">"vwpodcrviAjSFXGyFB"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"text_template"</span><span class="p">,</span> <span class="s">"kGTfzAmEu"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Notification</span><span class="p">&gt;</span> <span class="n">notification</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateNotificationAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"IlFZEWIJfFIcUVpQpjSiQhKmAAiTcmnJiwuoYsxWvmqnsxFAfYDlErhvgieaLMr"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"type"</span><span class="o">,</span> <span class="s">"email"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"event"</span><span class="o">,</span> <span class="s">"session_complete"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"html_template"</span><span class="o">,</span> <span class="s">"vwpodcrviAjSFXGyFB"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"text_template"</span><span class="o">,</span> <span class="s">"kGTfzAmEu"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">notification</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/notifications"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">IlFZEWIJfFIcUVpQpjSiQhKmAAiTcmnJiwuoYsxWvmqnsxFAfYDlErhvgieaLMr</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">event</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">session_complete</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">config</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">recipient</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">cardholder</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">url</span><span class="se">\"</span><span class="s2">:null,</span><span class="se">\"</span><span class="s2">from_email</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">CardUpdatr &lt;no-reply@cardupdatr.app&gt;</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">return_path</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">no-reply@cardupdatr.app</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">send_email_time</span><span class="se">\"</span><span class="s2">:null,</span><span class="se">\"</span><span class="s2">interval_length</span><span class="se">\"</span><span class="s2">:null,</span><span class="se">\"</span><span class="s2">interval_type</span><span class="se">\"</span><span class="s2">:null},</span><span class="se">\"</span><span class="s2">html_template</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">vwpodcrviAjSFXGyFB</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">text_template</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">kGTfzAmEu</span><span class="se">\"</span><span class="s2">}"</span>
<span class="nt">-X</span> PUT <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/notifications/1012632809
</code></pre></div><h3 id='path-36'>Path</h3>
<p>PUT /notifications OR /notifications/{id}</p>
<h3 id='description-36'>Description</h3>
<p>Update a notification and return the updated object.  An id is required on every update request.</p>
<h3 id='body-parameters-18'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td><a href="#post-notification-1">string enum</a>*</td>
<td></td>
</tr>
<tr>
<td>event</td>
<td><a href="#post-notification-2">string enum</a>**</td>
<td></td>
</tr>
<tr>
<td>config</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>html_template</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>text_template</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-notification">notification response parameters</a>.</p>
<h2 id='delete-notification'>Delete notification</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/notifications/1012632809
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">deleteNotification</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">Notification</span><span class="p">&gt;</span> <span class="n">notification</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">DeleteNotificationAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">notification</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/notifications"</span><span class="o">,</span> <span class="n">undefined</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><h3 id='path-37'>Path</h3>
<p>DELETE /notifications/{id}</p>
<h3 id='description-37'>Description</h3>
<p>Delete a notification and purge its <a href="#cascading-delete">related items</a>.  An id is required on every delete request.</p>

<p>See <a href="#response-notification">notification response parameters</a>.</p>
<h1 id='notification-results'>Notification results</h1>
<p>Notification result objects are records of an attempt/attempts to send a notification, indicating success/failure and additional relevant information.</p>
<h2 id='get-notification-result'>Get notification result</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/notification_results/1455281753
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">notificationresults</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getNotificationResults</span><span class="p">(</span><span class="mi">1455281753</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">NotificationResults</span><span class="p">&gt;</span> <span class="n">notificationresults</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetNotificationResultsAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">notificationresults</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/notification_results"</span><span class="o">,</span> <span class="mi">1455281753</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1455281753</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_attempt_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1998-11-01T00:31:12.947Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fi_lookup_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VQvIzMyjhWGqWuTcunlPcBgDGwmucRelwMjsLLHMCKRhyLRaVOOqqFjBpRRFzSV"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pNKpyzIyPoYyMVghC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failure"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"attempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"notification_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"status_code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="nl">"webhook_request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"request_data"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"webhook_response"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1982-12-24T09:35:41.937Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2011-06-11T15:45:39.235Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"notification"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">206253153</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qTRaPGIzSxUBmndQnjyxQKWEJNZNlhVRkbjBmGVFPIUrWmhylnrEtUgMIROwgan"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webhook_error_summary"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"sbudHCwWEuYm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"@Q3jxf.zY#[.vAKRUx[EL4Sn"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ZIVCWNqvFkiK"</span><span class="p">:</span><span class="w"> </span><span class="mi">49</span><span class="p">,</span><span class="w">
      </span><span class="nl">"PvSslJqoLXrA"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"html_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RNeOFlZHyKePg"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"text_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CHZmCBbzzsbXzkJmFLkoJH"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2001-11-17T08:08:19.806Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990-09-08T20:12:14.911Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-38'>Path</h3>
<p>GET /notification_results <strong>(batch)</strong> or GET /notification_results/:id <strong>(singular)</strong></p>
<h3 id='description-38'>Description</h3>
<p>Returns the notification result specified by the provided ID</p>
<h4 id='batch-get-requests-11'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable notification results, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/notification_results?ids=1,2</code></p>
<h4 id='singular-get-requests-11'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the notification result matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/notification_results/1455281753</code></p>
<h3 id='response-attributes-11'><a name="response-notification_result"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>last_attempt_date</td>
<td>date</td>
<td>Date of last attempt to post this notification.</td>
</tr>
<tr>
<td>fi_lookup_key</td>
<td>string</td>
<td>FI lookup key associated with the attempted notification.</td>
</tr>
<tr>
<td>cuid</td>
<td>string</td>
<td>Unique ID for cardholder--can be email address, phone number, etc.</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the notification attempt.</td>
</tr>
<tr>
<td>attempts</td>
<td>number</td>
<td>Number of attempts made to send or post notification.</td>
</tr>
<tr>
<td>notification_data</td>
<td>object</td>
<td>Data sent with the notification.</td>
</tr>
<tr>
<td>created_on</td>
<td>date</td>
<td>Date this notification result was created on</td>
</tr>
<tr>
<td>last_updated_on</td>
<td>date</td>
<td>Date this notification result was last updated on</td>
</tr>
<tr>
<td>notification_id</td>
<td>number (fk)</td>
<td>ID of the attempted notification.</td>
</tr>
</tbody></table>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters-11'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>notification_ids</li>
<li>last_attempt_date_min / last_attempt_date_max</li>
<li>fi_lookup_keys</li>
<li>cuid</li>
<li>status</li>
<li>attempts</li>
<li>attempts_min / attempts_max</li>
<li>created_on_min / created_on_max</li>
<li>last_updated_on_min / last_updated_on_max</li>
</ul>
<h2 id='create-notification-result'>Create notification result</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">notificationresult</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createNotificationResult</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">notification_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1899633271</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">fi_lookup_key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">VQvIzMyjhWGqWuTcunlPcBgDGwmucRelwMjsLLHMCKRhyLRaVOOqqFjBpRRFzSV</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">cuid</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">pNKpyzIyPoYyMVghC</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">failure</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">attempts</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">notification_data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">status_code</span><span class="dl">"</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">webhook_request</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">request_data</span><span class="dl">"</span><span class="p">:</span> <span class="mi">123</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">webhook_response</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">OK</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"notification_id"</span><span class="p">,</span> <span class="m">1899633271</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"fi_lookup_key"</span><span class="p">,</span> <span class="s">"VQvIzMyjhWGqWuTcunlPcBgDGwmucRelwMjsLLHMCKRhyLRaVOOqqFjBpRRFzSV"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"cuid"</span><span class="p">,</span> <span class="s">"pNKpyzIyPoYyMVghC"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"status"</span><span class="p">,</span> <span class="s">"failure"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"attempts"</span><span class="p">,</span> <span class="m">3</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">NotificationResult</span><span class="p">&gt;</span> <span class="n">notificationresult</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">CreateNotificationResultAsync</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"notification_id"</span><span class="o">,</span> <span class="mi">1899633271</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"fi_lookup_key"</span><span class="o">,</span> <span class="s">"VQvIzMyjhWGqWuTcunlPcBgDGwmucRelwMjsLLHMCKRhyLRaVOOqqFjBpRRFzSV"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"cuid"</span><span class="o">,</span> <span class="s">"pNKpyzIyPoYyMVghC"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="s">"failure"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"attempts"</span><span class="o">,</span> <span class="mi">3</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">notificationresult</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/notification_results"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">notification_id</span><span class="se">\"</span><span class="s2">:1899633271,</span><span class="se">\"</span><span class="s2">fi_lookup_key</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">VQvIzMyjhWGqWuTcunlPcBgDGwmucRelwMjsLLHMCKRhyLRaVOOqqFjBpRRFzSV</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">cuid</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">pNKpyzIyPoYyMVghC</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">status</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">failure</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">attempts</span><span class="se">\"</span><span class="s2">:3,</span><span class="se">\"</span><span class="s2">notification_data</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">status_code</span><span class="se">\"</span><span class="s2">:200,</span><span class="se">\"</span><span class="s2">webhook_request</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">request_data</span><span class="se">\"</span><span class="s2">:123},</span><span class="se">\"</span><span class="s2">webhook_response</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">OK</span><span class="se">\"</span><span class="s2">}}"</span>
<span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/notification_results/
</code></pre></div><h3 id='path-39'>Path</h3>
<p>POST /notification_results</p>
<h3 id='description-39'>Description</h3>
<p>Create a notification result and return the created object.</p>
<h3 id='body-parameters-19'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>notification_id</td>
<td>number</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>fi_lookup_key</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>cuid</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td><a href="#post-notification_result-1">string enum</a>*</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>attempts</td>
<td>number</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>notification_data</td>
<td>object</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-notification_result">notification result response attributes</a>.</p>
<h4 id='string-enum-4'><a name="post-notification_result-1"></a>string enum*</h4>
<ul>
<li>success</li>
<li>failure</li>
</ul>
<h1 id='single-site-jobs'>Single-site jobs</h1>
<p>Single-site job objects contain the information necessary to place a payment card on a merchant site, as well as status information about the card placement attempt. They are linked to a single cardholder, account, card, and merchant site.</p>
<h2 id='get-single-site-job'>Get single-site job</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/place_card_on_single_site_jobs/1547498817
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">singlesitejobs</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getSingleSiteJobs</span><span class="p">(</span><span class="mi">1547498817</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">SingleSiteJobs</span><span class="p">&gt;</span> <span class="n">singlesitejobs</span> <span class="p">=</span> <span class="k">await</span> <span class="n">session</span><span class="p">.</span><span class="nf">GetSingleSiteJobsAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">singlesitejobs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/place_card_on_single_site_jobs"</span><span class="o">,</span> <span class="mi">1547498817</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Sample response - not all properties are available to all roles (200 OK):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1547498817</span><span class="p">,</span><span class="w">
  </span><span class="nl">"card_placement_result_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">500635106</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"custom_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"sPVWTNcRXbaX"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IX_G4S8"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"svKhizKIewJk"</span><span class="p">:</span><span class="w"> </span><span class="mi">90</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fxnyUVldnxQd"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TOCqMnmBzovXMJPCTUxV"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"notification_sent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time_elapsed"</span><span class="p">:</span><span class="w"> </span><span class="mi">1923723007</span><span class="p">,</span><span class="w">
  </span><span class="nl">"started_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1980-08-23T04:21:21.396Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1978-05-05T13:15:27.497Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-01-07T07:01:08.688Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1970-02-14T16:22:41.376Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cardholder"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1756186674</span><span class="p">,</span><span class="w">
    </span><span class="nl">"financial_institution_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">531186510</span><span class="p">,</span><span class="w">
    </span><span class="nl">"agent_session_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eQJnGL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ephemeral"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RS"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yMOnAICGmfQCg"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yCpRLJebXxFK@peDfmh.idr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"meta_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RJhnbTleCRsjqaRbiHogK"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cardholder_safe_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mGjnD4TXrsIREM7NStYwCtnnTMKhUo53WDTl9CeKD7A="</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"XodelDnBknGD"</span><span class="p">:</span><span class="w"> </span><span class="s2">"!T.7,skH0ZtI%M_wzkun&amp;r+f[d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"MFhEpnPRDByk"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pUcJOproHHKa"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1983-10-09T15:39:27.073Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1971-01-10T09:44:07.150Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cardsavr_card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1653187206</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bin_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1128846411</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cvv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zKq"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expiration_month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"W"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expiration_year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name_on_card"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ytbgpXNacORwcicdTdClRYIAtslJAeWOMGAphbyhkCaGTfHlljmvtevzOxTSxcWMDmaRcfJEsPMxzHXbCIsoRNogAsCCzWOCXdZiYmnEpbeRhsfFQhlIpAKMnPsPzzXiMNyzXrYAmFXmsgJOKntRwKJFpvDTpIVHyuQgGuAMCqBgrqvWlvnELQWYzsHZzKGJljKpFsZXfeiPIfXgzwzQcyTGJBDYxFOMTjmbBfUTEcpKwttZpwRraVhloxHdXt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_6"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NajApUiBloVYODsJZVCICEjPFeeSOjhl"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_7"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ziEnUCuDhAUCiJonvVpxMovORSWFpMtg"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first_8"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rthODBOmigpdKejcybsOzOCeEasidDFM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-17T08:07:13.681Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2000-07-09T15:48:52.701Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cardsavr_account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1544833992</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_card_placed_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1748060416</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OjrrIajSkSWgOFqayCTUxfGHVJZUGdPObTfUVYCqomtkpwxODXEUblxJQkB"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wPSgkgdvhOdhTlTRvwSPhqxCRXNGJjlLZayMzEOLkTvRElSjWhajOQqVnHG"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qdbIXfvIMZgyhINKUWYmSJLwBezezfDOlnYEScjiJLeIEdyicJQwiVvEVmh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1972-06-07T14:12:44.026Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_password_update"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T18:32:53.485Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_saved_card"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2007-12-04T04:40:50.201Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1992-12-07T21:00:04.111Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_updated_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T11:49:04.633Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-40'>Path</h3>
<p>GET /place_card_on_single_site_jobs <strong>(batch)</strong> or GET /place_card_on_single_site_jobs/:id <strong>(singular)</strong></p>
<h3 id='description-40'>Description</h3>
<p>Returns the single-site job specified by the provided ID</p>
<h4 id='batch-get-requests-12'>Batch GET requests</h4>
<p><strong>Batch requests</strong> return the first page of all viewable single-site jobs, filtered by any <a href="#get-filters">query filters</a> listed in the path.</p>

<p><strong>Example batch GET request path:</strong><br><code>/place_card_on_single_site_jobs?ids=1,2</code></p>
<h4 id='singular-get-requests-12'>Singular GET requests</h4>
<p><strong>Singular requests</strong> only return the single-site job matching the id provided in the path.</p>

<p><strong>Example GET request path:</strong><br><code>/place_card_on_single_site_jobs/1547498817</code></p>
<h3 id='response-attributes-12'><a name="response-place_card_on_single_site_job"></a>Response attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>card_id</td>
<td>number (fk)</td>
<td>ID of card associated with this job.</td>
</tr>
<tr>
<td>card_placement_result_id</td>
<td>string</td>
<td>ID of card placement result associated with this job.</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Current status of job (e.g. pending_tfa).</td>
</tr>
<tr>
<td>custom_data</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>failure_reason</td>
<td>string</td>
<td>If job failed, reason for failure.</td>
</tr>
<tr>
<td>notification_sent</td>
<td>boolean</td>
<td>Indicates if a notification has been sent or posted for this job.</td>
</tr>
<tr>
<td>time_elapsed</td>
<td>number</td>
<td>Amount of time elapsed since the creation of the job.</td>
</tr>
<tr>
<td>started_on</td>
<td>date</td>
<td>Time when job started.</td>
</tr>
<tr>
<td>completed_on</td>
<td>date</td>
<td>Timestamp of job completion.</td>
</tr>
<tr>
<td>created_on</td>
<td>date</td>
<td>Date this site was created on</td>
</tr>
<tr>
<td>last_updated_on</td>
<td>date</td>
<td>Date this site was last updated on</td>
</tr>
<tr>
<td>cardholder_id</td>
<td>number (fk)</td>
<td>ID of cardholder associated with this job.</td>
</tr>
<tr>
<td>account_id</td>
<td>number (fk)</td>
<td>ID of account associated with this job.</td>
</tr>
</tbody></table>

<p>NOTE: All foreign key parameters (fk) can be <a href="#hydration">hydrated</a> and support <a href="#cascading-delete">cascading delete</a>.</p>
<h3 id='filter-parameters-12'>Filter parameters</h3>
<ul>
<li>ids / id (in path)</li>
<li>cardholder_ids</li>
<li>card_ids</li>
<li>account_ids</li>
<li>card_placement_result_ids</li>
<li>status</li>
<li>status_include / status_exclude</li>
<li>notification_sent</li>
<li>time_elapsed_min / time_elapsed_max</li>
<li>started_on_min / started_on_max</li>
<li>completed_on_min / completed_on_max</li>
<li>created_on_min / created_on_max</li>
<li>last_updated_on_min / last_updated_on_max</li>
</ul>
<h2 id='create-single-site-job'>Create single-site job</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">singlesitejob</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">createSingleSiteJob</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">cardholder_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2132841586</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">card_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1687385085</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">account_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">154749998</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">UPDATING</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">custom_data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">sPVWTNcRXbaX</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">IX_G4S8</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">svKhizKIewJk</span><span class="dl">"</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">fxnyUVldnxQd</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">failure_reason</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">TOCqMnmBzovXMJPCTUxV</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">notification_sent</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">time_elapsed</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1923723007</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">started_on</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1980-08-23T04:21:21.396Z</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">completed_on</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1978-05-05T13:15:27.497Z</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">card_placement_result_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">500635106</span>
<span class="p">},</span> <span class="nx">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"cardholder_id"</span><span class="p">,</span> <span class="m">2132841586</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"card_id"</span><span class="p">,</span> <span class="m">1687385085</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"account_id"</span><span class="p">,</span> <span class="m">154749998</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"status"</span><span class="p">,</span> <span class="s">"UPDATING"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"failure_reason"</span><span class="p">,</span> <span class="s">"TOCqMnmBzovXMJPCTUxV"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"notification_sent"</span><span class="p">,</span> <span class="k">false</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"time_elapsed"</span><span class="p">,</span> <span class="m">1923723007</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"started_on"</span><span class="p">,</span> <span class="s">"1980-08-23T04:21:21.396Z"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"completed_on"</span><span class="p">,</span> <span class="s">"1978-05-05T13:15:27.497Z"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"card_placement_result_id"</span><span class="p">,</span> <span class="m">500635106</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">SingleSiteJob</span><span class="p">&gt;</span> <span class="n">singlesitejob</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">CreateSingleSiteJobAsync</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"cardholder_id"</span><span class="o">,</span> <span class="mi">2132841586</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"card_id"</span><span class="o">,</span> <span class="mi">1687385085</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"account_id"</span><span class="o">,</span> <span class="mi">154749998</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="s">"UPDATING"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"failure_reason"</span><span class="o">,</span> <span class="s">"TOCqMnmBzovXMJPCTUxV"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"notification_sent"</span><span class="o">,</span> <span class="kc">false</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"time_elapsed"</span><span class="o">,</span> <span class="mi">1923723007</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"started_on"</span><span class="o">,</span> <span class="s">"1980-08-23T04:21:21.396Z"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"completed_on"</span><span class="o">,</span> <span class="s">"1978-05-05T13:15:27.497Z"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"card_placement_result_id"</span><span class="o">,</span> <span class="mi">500635106</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">singlesitejob</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/place_card_on_single_site_jobs"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">cardholder_id</span><span class="se">\"</span><span class="s2">:2132841586,</span><span class="se">\"</span><span class="s2">card_id</span><span class="se">\"</span><span class="s2">:1687385085,</span><span class="se">\"</span><span class="s2">account_id</span><span class="se">\"</span><span class="s2">:154749998,</span><span class="se">\"</span><span class="s2">status</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">UPDATING</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">custom_data</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">sPVWTNcRXbaX</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">IX_G4S8</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">svKhizKIewJk</span><span class="se">\"</span><span class="s2">:90,</span><span class="se">\"</span><span class="s2">fxnyUVldnxQd</span><span class="se">\"</span><span class="s2">:true},</span><span class="se">\"</span><span class="s2">failure_reason</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">TOCqMnmBzovXMJPCTUxV</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">notification_sent</span><span class="se">\"</span><span class="s2">:false,</span><span class="se">\"</span><span class="s2">time_elapsed</span><span class="se">\"</span><span class="s2">:1923723007,</span><span class="se">\"</span><span class="s2">started_on</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1980-08-23T04:21:21.396Z</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">completed_on</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1978-05-05T13:15:27.497Z</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">card_placement_result_id</span><span class="se">\"</span><span class="s2">:500635106}"</span>
<span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-cardholder-safe-key: CARDHOLDER_SAFE_KEY"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/place_card_on_single_site_jobs/
</code></pre></div><h3 id='path-41'>Path</h3>
<p>POST /place_card_on_single_site_jobs</p>
<h3 id='description-41'>Description</h3>
<p>Create a single-site job and return the created object.</p>
<h3 id='body-parameters-20'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cardholder_id</td>
<td>number</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>card_id</td>
<td>number</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>account_id</td>
<td>number</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td><a href="#post-place_card_on_single_site_job-1">string enum</a>*</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>custom_data</td>
<td>object</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>failure_reason</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>notification_sent</td>
<td>boolean</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>time_elapsed</td>
<td>number</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>started_on</td>
<td>date</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>completed_on</td>
<td>date</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-place_card_on_single_site_job">single-site job response attributes</a>.</p>
<h4 id='string-enum-5'><a name="post-place_card_on_single_site_job-1"></a>string enum*</h4>
<ul>
<li>INITIATED</li>
<li>REQUESTED</li>
<li>IN_PROGRESS</li>
<li>AUTH</li>
<li>LOGIN_SUBMITTED</li>
<li>PENDING_CREDS</li>
<li>CREDS_RECEIVED</li>
<li>PENDING_NEWCREDS</li>
<li>NEWCREDS_RECEIVED</li>
<li>PENDING_CARD</li>
<li>LOGIN_RESUBMITTED</li>
<li>PENDING_TFA</li>
<li>TFA_CODE_RECEIVED</li>
<li>TFA_SUBMITTED</li>
<li>UPDATING</li>
<li>QUEUED</li>
<li>NETWORK_ISSUE</li>
<li>CANCEL_REQUESTED</li>
<li>CANCELLED</li>
<li>CANCELLED_QUICKSTART</li>
<li>ABANDONED</li>
<li>ABANDONED_QUICKSTART</li>
<li>KILLED</li>
<li>ACCOUNT_SETUP_INCOMPLETE</li>
<li>ACCOUNT_NOT_SUPPORTED</li>
<li>COUNTRY_NOT_SUPPORTED</li>
<li>PREPAID_ACCOUNT</li>
<li>INACTIVE_ACCOUNT</li>
<li>INVALID_CARD</li>
<li>INVALID_ADDRESS</li>
<li>PASSWORD_RESET_REQUIRED</li>
<li>BUNDLED_SUBSCRIPTION</li>
<li>FREE_ACCOUNT</li>
<li>ACCOUNT_LOCKED</li>
<li>DUPLICATE_CARD</li>
<li>INVALID_EXPIRATION_DATE</li>
<li>EXPIRED_CARD</li>
<li>INVALID_CVV</li>
<li>INVALID_NETWORK</li>
<li>MAX_LIMIT_OF_STORED_CARDS</li>
<li>SUCCESSFUL</li>
<li>UNSUPPORTED_CAPTCHA</li>
<li>TIMEOUT_CAPTCHA</li>
<li>TIMEOUT_CREDENTIALS</li>
<li>TIMEOUT_TFA</li>
<li>TOO_MANY_LOGIN_FAILURES</li>
<li>TOO_MANY_TFA_FAILURES</li>
<li>UNSUCCESSFUL</li>
<li>PROXY_PROBE_FAILED</li>
<li>VBS_TIMEOUT</li>
<li>VBS_ERROR</li>
</ul>

<aside class="notice">Update calls to /place_card_on_single_site_jobs require the cardholder's personal cardholder_safe_key header to encrypt and save the safe when Strivve does not manage keys for a customer (this is an environment setting). The safe keys are also not required if updating non-safe user properties.</aside>
<h2 id='update-single-site-job'>Update single-site job</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">singlesitejob</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">updateSingleSiteJob</span><span class="p">(</span><span class="mi">1</span><span class="p">,{</span>
  <span class="dl">"</span><span class="s2">card_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">752361361</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">INVALID_EXPIRATION_DATE</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">custom_data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">LRNgTExaEymF</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">9</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">GYIqUGWtUpPq</span><span class="dl">"</span><span class="p">:</span> <span class="mi">74</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">VHpJaEGqvmOn</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">failure_reason</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ahxPIzvWcxQHfCMlzLbzSljUR</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">notification_sent</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">time_elapsed</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1907791458</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">started_on</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2016-01-03T14:07:47.093Z</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">completed_on</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1999-04-24T03:47:58.743Z</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">card_placement_result_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">500635106</span>
<span class="p">},</span> <span class="nx">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">PropertyBag</span> <span class="n">body</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PropertyBag</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"card_id"</span><span class="p">,</span> <span class="m">752361361</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"status"</span><span class="p">,</span> <span class="s">"INVALID_EXPIRATION_DATE"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"failure_reason"</span><span class="p">,</span> <span class="s">"ahxPIzvWcxQHfCMlzLbzSljUR"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"notification_sent"</span><span class="p">,</span> <span class="k">false</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"time_elapsed"</span><span class="p">,</span> <span class="m">1907791458</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"started_on"</span><span class="p">,</span> <span class="s">"2016-01-03T14:07:47.093Z"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"completed_on"</span><span class="p">,</span> <span class="s">"1999-04-24T03:47:58.743Z"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"card_placement_result_id"</span><span class="p">,</span> <span class="m">500635106</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">SingleSiteJob</span><span class="p">&gt;</span> <span class="n">singlesitejob</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">UpdateSingleSiteJobAsync</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">CARDHOLDER_SAFE_KEY</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonObject</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"card_id"</span><span class="o">,</span> <span class="mi">752361361</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="s">"INVALID_EXPIRATION_DATE"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"failure_reason"</span><span class="o">,</span> <span class="s">"ahxPIzvWcxQHfCMlzLbzSljUR"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"notification_sent"</span><span class="o">,</span> <span class="kc">false</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"time_elapsed"</span><span class="o">,</span> <span class="mi">1907791458</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"started_on"</span><span class="o">,</span> <span class="s">"2016-01-03T14:07:47.093Z"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"completed_on"</span><span class="o">,</span> <span class="s">"1999-04-24T03:47:58.743Z"</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"card_placement_result_id"</span><span class="o">,</span> <span class="mi">500635106</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">JsonValue</span> <span class="n">singlesitejob</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/place_card_on_single_site_jobs"</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">card_id</span><span class="se">\"</span><span class="s2">:752361361,</span><span class="se">\"</span><span class="s2">status</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">INVALID_EXPIRATION_DATE</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">custom_data</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">LRNgTExaEymF</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">9</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">GYIqUGWtUpPq</span><span class="se">\"</span><span class="s2">:74,</span><span class="se">\"</span><span class="s2">VHpJaEGqvmOn</span><span class="se">\"</span><span class="s2">:true},</span><span class="se">\"</span><span class="s2">failure_reason</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">ahxPIzvWcxQHfCMlzLbzSljUR</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">notification_sent</span><span class="se">\"</span><span class="s2">:false,</span><span class="se">\"</span><span class="s2">time_elapsed</span><span class="se">\"</span><span class="s2">:1907791458,</span><span class="se">\"</span><span class="s2">started_on</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">2016-01-03T14:07:47.093Z</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">completed_on</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1999-04-24T03:47:58.743Z</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">card_placement_result_id</span><span class="se">\"</span><span class="s2">:500635106}"</span>
<span class="nt">-X</span> PUT <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">-H</span> <span class="s2">"cardholder-safe-key: CARDHOLDER_SAFE_KEY"</span>
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/place_card_on_single_site_jobs/1547498817
</code></pre></div><h3 id='path-42'>Path</h3>
<p>PUT /place_card_on_single_site_jobs OR /place_card_on_single_site_jobs/{id}</p>
<h3 id='description-42'>Description</h3>
<p>Update a single-site job and return the updated object.  An id is required on every update request.</p>
<h3 id='body-parameters-21'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>card_id</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td><a href="#post-place_card_on_single_site_job-1">string enum</a>*</td>
<td></td>
</tr>
<tr>
<td>custom_data</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>failure_reason</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>notification_sent</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>time_elapsed</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>started_on</td>
<td>date</td>
<td></td>
</tr>
<tr>
<td>completed_on</td>
<td>date</td>
<td></td>
</tr>
</tbody></table>

<p>See <a href="#response-place_card_on_single_site_job">single-site job response parameters</a>.</p>

<aside class="notice">Update calls to /place_card_on_single_site_jobs require the cardholder's personal cardholder_safe_key header to encrypt and save the safe when Strivve does not manage keys for a customer (this is an environment setting). The safe keys are also not required if updating non-safe properties.</aside>
<h2 id='delete-single-site-job'>Delete single-site job</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE
<span class="nt">-H</span> <span class="s2">"x-cardsavr-trace:{</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-b</span> ~/_cookies <span class="nt">-c</span> ~/_cookies
https://api.INSTANCE.cardsavr.io/place_card_on_single_site_jobs/1547498817
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">deleteSingleSiteJob</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">CardSavrResponse</span><span class="p">&lt;</span><span class="n">SingleSiteJob</span><span class="p">&gt;</span> <span class="n">singlesitejob</span> <span class="p">=</span> <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="nf">DeleteSingleSiteJobAsync</span><span class="p">(</span><span class="n">undefined</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">JsonValue</span> <span class="n">singlesitejob</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/place_card_on_single_site_jobs"</span><span class="o">,</span> <span class="n">undefined</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre></div><h3 id='path-43'>Path</h3>
<p>DELETE /place_card_on_single_site_jobs/{id}</p>
<h3 id='description-43'>Description</h3>
<p>Delete a single-site job and purge its <a href="#cascading-delete">related items</a>.  An id is required on every delete request.</p>

<p>See <a href="#response-place_card_on_single_site_job">single-site job response parameters</a>.</p>
<h1 id='client-messages'>Client Messages</h1><h2 id='subscribe-to-status-updates'>Subscribe to Status Updates</h2>
<blockquote>
<p>Before you can listen to a channel, you must first subscribe.  Unlike credential requests, multiple clients can listen to messages for the same job.</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">session</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSession</span><span class="p">(</span><span class="nx">username</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">subscription</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">registerForJobStatusUpdates</span><span class="p">(</span><span class="nx">job_id</span><span class="p">);</span>
<span class="c1">//this key is necessary for all future requests</span>
<span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">subscription</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">access_key</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="c1">//not implemented</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="c1">//not implemented</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#session must first be started, and must have permissions</span>
curl <span class="nt">-iv</span> 
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="s2">"https://api.INSTANCE.cardsavr.io/messages/place_card_on_single_site_jobs/123/broadcasts/registrations"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span>  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<blockquote>
<p>access_key is required for all future requests for status updates.  Messages are returned as an array.  status is always job_status</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"access_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"erz5nk219FPZNWGv3AbHdA=="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path'>Path</h3>
<p>GET /messages/place_card_on_single_site_jobs/job_id:/broadcasts/registrations</p>
<h3 id='description'>Description</h3>
<p>Registers a client to a broadcast message channel.  Messages are saved for an hour waiting for the client to poll.  Generally clients poll every 3-5 seconds.  Multiple clients can poll for messages for the same job, so each client has its own access key.  </p>

<p>Note: Creating a place_card_on_single_site_job will automatically create a subscription to a job and return an access_key.  Thereforce explicit subscription is only for higher privileged agents that didn&#39;t actually create the job.</p>

<aside class="notice">
See the <a href="https://developers.strivve.com/resources/messaging">Messaging system document</a> for more details on how the messaging system is architected.
</aside>
<h2 id='get-job-status-updates'>Get Job Status Updates</h2>
<blockquote>
<p>The unique access key is returned for every broadcast message poll request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">broadcast_probe</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> 
    <span class="kd">const</span> <span class="nx">update</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getJobStatusUpdate</span><span class="p">(</span><span class="nx">job_id</span><span class="p">,</span> <span class="nx">subscription</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">access_key</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">update</span><span class="p">.</span><span class="nx">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">broadcast_probe</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">update</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">update</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="na">item</span><span class="p">:</span> <span class="nx">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">callback</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>   <span class="c1">//process message "item"</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">job_status</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">termination_type</span> <span class="o">||</span> <span class="nx">item</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">percent_complete</span> <span class="o">==</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//job is completed, stop probing</span>
                    <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">broadcast_probe</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">Not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-iv</span> <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> 
  <span class="s2">"https://api.INSTANCE.cardsavr.io/messages/place_card_on_single_site_jobs/123/broadcasts/"</span> 
  <span class="nt">-H</span> <span class="s2">"cardsavr-messaging-access-key: erz5nk219FPZNWGv3AbHdA=="</span>
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span>  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<blockquote>
<p>Response is an array, as mutliple messages may be generated between polls.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"job_status"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"job_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">856058</span><span class="p">,</span><span class="w">
            </span><span class="nl">"percent_complete"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTH"</span><span class="w">            
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"job_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"job_status"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"job_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">855737</span><span class="p">,</span><span class="w">
            </span><span class="nl">"percent_complete"</span><span class="p">:</span><span class="w"> </span><span class="mi">54</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATING"</span><span class="w">            
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"job_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div><h3 id='path-2'>Path</h3>
<p>GET /messages/place_card_on_single_site_jobs/job_id:/broadcasts</p>
<h3 id='description-2'>Description</h3>
<p>Grabs the status messages for this job.  If there are no messages, none are returned.  Since multiple messages may be returned, the body is an array of messages.  When jobs complete, the final message will have a &quot;termination_type&quot; with values:</p>

<table><thead>
<tr>
<th>Termination type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>BILLABLE</td>
<td>Job completed successfully</td>
</tr>
<tr>
<td>USER_DATA_FAILURE</td>
<td>There was an issue with data supplied by the cardholder like a TFA code or password</td>
</tr>
<tr>
<td>SITE_INTERACTION_FAILURE</td>
<td>Cardsavr was unable to definitively place the card on the site</td>
</tr>
<tr>
<td>PROCESS_FAILURE</td>
<td>There was an internal system failure - these happen very rarely and should be escallated immediately</td>
</tr>
</tbody></table>
<h2 id='get-cardholder-status-updates'>Get Cardholder Status Updates</h2>
<blockquote>
<p>The unique access key is returned for every broadcast message poll request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">messages</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getCardholderMessages</span><span class="p">(</span><span class="nx">cardholder_id</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">messages</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">messages</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">job_status</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span> 
            <span class="nx">conssole</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">Not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">Not</span> <span class="n">implemented</span> <span class="n">yet</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-iv</span> <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> 
  <span class="s2">"https://api.INSTANCE.cardsavr.io/messages/cardholders/123/"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span>  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<blockquote>
<p>Response is an array, as mutliple messages from multiple jobs may be generated between polls.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"job_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1585"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"job_status"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTH"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"job_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">781440</span><span class="p">,</span><span class="w">
            </span><span class="nl">"percent_complete"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"job_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1586"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"job_status"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTH"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"job_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">781254</span><span class="p">,</span><span class="w">
            </span><span class="nl">"percent_complete"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div><h3 id='path-3'>Path</h3>
<p>GET /messages/cardholders/cardholder_id</p>
<h3 id='description-3'>Description</h3>
<p>Grabs the status messages for this cardholder.  If there are no messages, none are returned.  When runniung multiple jobs, this is much more efficient mechanism for retrieving messaages.  You do not need to manage acceess_keys since the permissions are managed via the cardholder agent&#39;s permissions.  Since multiple job and messages may be returned, the body is an array of messages.  As jobs complete, the final message for each job will have a &quot;termination_type&quot; with values:</p>

<table><thead>
<tr>
<th>Termination type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>BILLABLE</td>
<td>Job completed successfully</td>
</tr>
<tr>
<td>USER_DATA_FAILURE</td>
<td>There was an issue with data supplied by the cardholder like a TFA code or password</td>
</tr>
<tr>
<td>SITE_INTERACTION_FAILURE</td>
<td>Cardsavr was unable to definitively place the card on the site</td>
</tr>
<tr>
<td>PROCESS_FAILURE</td>
<td>There was an internal system failure - these happen very rarely and should be escallated immediately</td>
</tr>
</tbody></table>
<h2 id='get-credential-requests'>Get Credential Requests</h2>
<blockquote>
<p>Credential requests must be polled for using the job_id.  Permissions are established based on the role and the owner of the job.</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">request_probe</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> 
    <span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">session</span><span class="p">.</span><span class="nx">getJobInformationRequest</span><span class="p">(</span><span class="nx">job_id</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span> <span class="c1">//callback is a function that processes the message.</span>
    <span class="p">}</span>
<span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="c1">//not implemented</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="c1">// not implemented</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># With a shell, you must first establish a sessionby logging in.</span>
<span class="c"># All calls must be accompanied by the session token.  This only works on a dev</span>
<span class="c"># server with authentication optional. </span>
curl <span class="s2">"https://api.INSTANCE.cardsavr.io/messages/place_card_on_single_site_jobs/123/broadcasts"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span>  <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span> 
</code></pre></div>
<blockquote>
<p>The response contains a unique request envelope id which must be returned with the response.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tfa_request"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"job_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
  </span><span class="nl">"envelope_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uHsa6mI3GYO2ZwOf82SuaA=="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-4'>Path</h3>
<p>GET /messages/place_card_on_single_site_jobs/job_id:/credential_requests</p>
<h3 id='description-4'>Description</h3>
<p>Polls the server for requests from the virtual browser session.  This might be new credentials or a TFA code.  You must use the envelope_id that was returned with the initial request message.</p>
<h2 id='post-credential-response'>Post Credential Response</h2>
<blockquote>
<p>Jobs wiill wait until a credential response is posted.</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">session</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSession</span><span class="p">(</span><span class="nx">username</span><span class="p">);</span> <span class="c1">//session should already be loaded</span>
<span class="nx">session</span><span class="p">.</span><span class="nx">sendJobInformation</span><span class="p">(</span><span class="nx">job_id</span><span class="p">,</span> <span class="nx">envelope_id</span><span class="p">,</span> <span class="dl">"</span><span class="s2">tfa_response</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1234</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="c1">//not implemented</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#session must first be started</span>
curl <span class="nt">-iv</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">envelope_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">uHsa6mI3GYO2ZwOf82SuaA==</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">tfa_request</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">message</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">1234</span><span class="se">\"</span><span class="s2">}"</span> 
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="s2">"https://api.INSTANCE.cardsavr.io/messages/place_card_on_single_site_jobs/123/credential_responses"</span> 
  <span class="nt">-H</span> <span class="s2">"x-cardsavr-trace: {</span><span class="se">\"</span><span class="s2">key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my_trace</span><span class="se">\"</span><span class="s2">}"</span> <span class="nt">-H</span> <span class="s2">"x-cardsavr-session-jwt: {{JWT_TOKEN}}"</span>
</code></pre></div>
<blockquote>
<p>The login call returns the user, along with a public key to be used to encrypt future requests</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credential_response"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"job_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
  </span><span class="nl">"envelope_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uHsa6mI3GYO2ZwOf82SuaA=="</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submitted"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='path-5'>Path</h3>
<p>POST /messages/place_card_on_single_site_jobs/job_id:/credential_responses</p>
<h3 id='description-5'>Description</h3>
<p>Post the response to a TFA request or a bad credential request</p>

<aside class="notice">
Credential resubmission messages notify the virtual browser session that credentials have been updated. The client application still needs to save the new credentials in the job safe by updating the account.
</aside>
<h3 id='body-parameters'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Desription</th>
</tr>
</thead><tbody>
<tr>
<td>envelope_id</td>
<td>string</td>
<td>yes</td>
<td>unique key associated with the original request</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>yes</td>
<td>credential_request or tfa_request</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>yes</td>
<td>&quot;success&quot; for credential resubmissions, and the tfa code entered by the cardholder for TFA responses</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<aside class="notice">
Strivve adheres to a standard set of error codes.  In general, formatting/data errors should return 400 responses.  500 errors should be reported to developers@strivve.com.
</aside>

<p>The Strivve API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The request is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified entity could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access an entity with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many entities! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="csharp">csharp</a>
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  </body>
</html>
